<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Faszom Gyakorlat</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #333; 
            color: #e0e0e0; 
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }
        .game-section {
            background-color: #444; 
            padding: 25px 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            width: 90%;
            max-width: 800px;
            margin-top: 20px;
            margin-bottom: 20px;
            border: 1px solid #555;
        }
        h1, h2 {
            color: #00A8E8; 
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 1px 1px 1px #000;
        }
        h1 { font-size: 2em; }
        h2 { font-size: 1.6em; margin-top: 25px; border-bottom: 1px solid #00A8E8; padding-bottom: 10px;}

        .question-area { margin-bottom: 20px; }
        .question-section-title {
            font-size: 0.9em; color: #bbb; margin-bottom: 8px;
            font-weight: bold; border-left: 3px solid #00A8E8; padding-left: 10px;
        }
        .question-text { font-size: 1.15em; margin-bottom: 15px; line-height: 1.6; color: #F1C40F; }
        .answer-container {
            margin-top: 15px; padding: 15px; background-color: #3d3d3d; 
            border: 1px solid #555; border-radius: 6px; display: none;
        }
        .answer-title, .explanation-title, .simple-explanation-title { 
            font-weight: bold; display: block; margin-bottom: 5px; 
            font-size: 1.05em;
        }
        .answer-title { color: #2ECC71; }
        .explanation-title { color: #3498DB; }
        .simple-explanation-title { color: #E67E22; }

        .answer-text, .explanation-text, .simple-explanation-text { 
            margin-bottom: 10px; line-height: 1.5;
            font-size: 1em; color: #ccc;
        }
        .simple-explanation-text { font-style: italic;} 
        
        .event-options { display: none; } 
        .event-options button {
            display: block; width: 100%; padding: 12px; margin-bottom: 10px;
            border: 1px solid #00A8E8; 
            background-color: #555; 
            color: #e0e0e0; cursor: pointer; border-radius: 5px;
            text-align: left; font-size: 1em; transition: background-color 0.2s;
        }
        .event-options button:hover { background-color: #666; border-color: #F1C40F;}
        .event-options button.correct { background-color: #27AE60; border-color: #2ECC71; color: white; } 
        .event-options button.incorrect { background-color: #C0392B; border-color: #E74C3C; color: white; } 
        #timeline-feedback { margin-top: 15px; font-weight: bold; text-align: center; font-size: 1.05em; min-height: 1.4em; color: #ccc;}
        
        .button-container { display: flex; justify-content: space-around; margin-top: 25px; flex-wrap: wrap;}
        button {
            padding: 10px 20px; border: none; border-radius: 5px; 
            background-color: #00A8E8; 
            color: #fff; cursor: pointer; font-size: 1em;
            transition: background-color 0.2s; margin: 5px;
        }
        button:hover { background-color: #0077B3; }
        button:disabled { background: #6c757d; color: #aaa; cursor: not-allowed; }
        
        #final-timeline-stats { display: none; margin-top: 20px; padding: 15px; background-color: #3a3a3a; border-radius: 6px; border: 1px solid #505050; text-align:center; }
        #final-timeline-stats h3 { color: #F1C40F; }
        #final-timeline-stats p { margin: 6px 0; font-size: 1em; color: #ccc;}
        #final-timeline-stats .label { color: #00A8E8; font-weight: bold;}
        #final-timeline-stats .rank-display { font-size: 3em; margin-top: 10px; display: block; font-weight: bold;} 

        #timeline-correct-order-list { list-style-type: decimal; padding-left: 20px; text-align: left; margin-top:15px; background-color: #3d3d3d; padding:10px; border-radius:5px;}
        #timeline-correct-order-list li { margin-bottom: 5px; color: #ddd;}
        #timeline-controls-container { display: flex; justify-content: center; align-items: center; margin-bottom: 15px;}

    </style>
</head>
<body>
    <h1>Faszom Gyakorlat</h1>

    <div class="game-section" id="quiz-section-container">
        <h2>Kv√≠z - Gyakorl√°s</h2>
        
        <div class="question-area">
            <div id="quiz-section-title-display" class="question-section-title">T√©mak√∂r</div>
            <div id="question-display" class="question-text">Bet√∂lt√©s...</div>
            <div id="answer-display-container" class="answer-container">
                <strong class="answer-title">Helyes v√°lasz:</strong>
                <div id="answer-display" class="answer-text"></div>
                <strong class="explanation-title">Magyar√°zat:</strong>
                <div id="explanation-display" class="explanation-text"></div>
                <strong class="simple-explanation-title">H√ºly√≠tett Magyar√°zat:</strong>
                <div id="simple-explanation-display" class="simple-explanation-text"></div>
            </div>
        </div>

        <div class="button-container">
            <button id="show-answer-btn" onclick="showQuizAnswer()" disabled>V√°lasz mutat√°sa</button>
            <button id="next-question-btn" onclick="loadRandomQuizQuestion()">M√°sik K√©rd√©s</button>
        </div>
    </div>

    <div class="game-section" id="timeline-section-container">
        <h2>Id≈ërend Gyakorl√≥</h2>
        
        <div id="timeline-correct-order-container" style="display:none; margin-bottom: 20px;">
            <h3>Helyes Id≈ërendi Sorrend:</h3>
            <ol id="timeline-correct-order-list"></ol>
            <button onclick="toggleShowCorrectTimelineOrder()" style="margin-top:15px;">Sorrend Elrejt√©se</button>
        </div>

        <div id="timeline-start-screen">
             <div id="timeline-controls-container">
                <button id="show-timeline-order-btn" onclick="toggleShowCorrectTimelineOrder()" style="margin-right: 10px;">Helyes Sorrend</button>
                <button id="start-timeline-game-btn" onclick="startTimelineGame()">Start Id≈ërend</button>
            </div>
            <p style="text-align: center; font-size: 0.9em; color: #aaa; margin-top: 15px;">K√©szen √°llsz? Indulhat az id≈ërendi harc! 10 k√∂r√∂s lesz.</p>
        </div>

        <div id="timeline-game-content" style="display:none;">
            <p style="text-align: center; font-size: 0.9em; color: #aaa; margin-bottom: 15px;">Melyik esem√©ny t√∂rt√©nt kor√°bban? (<span id="timeline-round-counter">1</span>/10)</p>
            <div id="event-pair-display">
                <p style="text-align:center; font-weight:bold; font-size:1.1em; color: #E74C3C;">Melyik volt el≈ëbb?</p>
                <div class="event-options">
                    <button id="eventA-btn" onclick="checkTimelineOrder(0)">Esem√©ny A</button>
                    <button id="eventB-btn" onclick="checkTimelineOrder(1)">Esem√©ny B</button>
                </div>
            </div>
            <div id="timeline-feedback">V√°rom a v√°laszod...</div>
            <div class="button-container" style="justify-content: center;">
                <button id="next-pair-btn" onclick="loadNewEventPair()" disabled>K√∂vetkez≈ë p√°r</button>
            </div>
        </div>
        <div id="final-timeline-stats">
             <h3>J√°t√©k V√©ge - Eredm√©nyeid:</h3>
             <p><span class="label">El√©rt pontsz√°m:</span> <span id="final-score-display">0</span> / 10</p>
             <p><span class="label">Pontoss√°g:</span> <span id="final-accuracy-display">0</span>%</p>
             <p><span class="label">√ârt√©kel√©s:</span> <span class="rank-display" id="final-emoji-rank-display">?</span></p>
             <button onclick="startTimelineGame()" style="margin-top:15px;">√öjrapr√≥b√°lkoz√°s</button>
         </div>
    </div>

    <script>
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        const allQuizQuestions = [
            { section: "I. Teleki P√°l minisztereln√∂ks√©ge", question: "Ki dolgozta ki a f√∂ldreformot Teleki P√°l minisztereln√∂ks√©ge alatt, √©s ki volt ≈ë?", answer: { short: "Nagyat√°di Szab√≥ Istv√°n (f√∂ldm≈±vel√©si miniszter).", explanation: "A f√∂ldreform kidolgoz√°sa Nagyat√°di Szab√≥ Istv√°n nev√©hez f≈±z≈ëdik, aki Teleki korm√°ny√°nak f√∂ldm≈±vel√©si minisztere volt.", simple: "Nagyat√°di Szab√≥ volt a miniszter, aki a f√∂ldoszt√°ssal foglalkozott Teleki idej√©n." }},
            { section: "I. Teleki P√°l minisztereln√∂ks√©ge", question: "K√∂r√ºlbel√ºl h√°ny paraszt kapott f√∂ldet Teleki f√∂ldreformja sor√°n, √©s mekkor√°t?", answer: { short: "~300.000 paraszt, 5-10 hold f√∂ldet.", explanation: "A f√∂ldreform eredm√©nyek√©nt mintegy 300.000 paraszt jutott √°tlagosan 5-10 hold f√∂ldh√∂z.", simple: "Sok paraszt kapott egy kis darab f√∂ldet." }},
            { section: "I. Teleki P√°l minisztereln√∂ks√©ge", question: "Mi maradt meg a f√∂ldbirtokrendszerben a Teleki-f√©le f√∂ldreform ellen√©re?", answer: { short: "A nagybirtok rendszer megmaradt (sokan f√∂ldn√©lk√ºliek maradtak).", explanation: "Annak ellen√©re, hogy sokan kaptak f√∂ldet, a nagybirtokok rendszere tov√°bbra is fennmaradt, √©s sokan maradtak f√∂ldn√©lk√ºliek.", simple: "A gazdagok nagy f√∂ldjei megmaradtak, nem mindenki kapott." }},
            { section: "I. Teleki P√°l minisztereln√∂ks√©ge", question: "Milyen fell√©p√©st alkalmazott Teleki korm√°nya a sz√©ls≈ës√©ges p√°rtok (pl. kommunist√°k) ellen?", answer: { short: "Betilt√°s, b√∂rt√∂n, kiv√©gz√©s.", explanation: "A Teleki-korm√°ny hat√°rozottan l√©pett fel a sz√©ls≈ës√©ges p√°rtokkal, p√©ld√°ul a kommunist√°kkal szemben, ami mag√°ban foglalta a p√°rtok betilt√°s√°t, tagjaik beb√∂rt√∂nz√©s√©t, √©s ak√°r kiv√©gz√©s√©t is.", simple: "Teleki√©k kem√©nyen b√°ntak a sz√©ls≈ës√©gesekkel, f≈ëleg a komcsikkal." }},
            { section: "I. Teleki P√°l minisztereln√∂ks√©ge", question: "Mit jelentett a ‚Äûnumerus clausus‚Äù (‚Äûz√°rt sz√°m‚Äù)?", answer: { short: "Egyetemeken a ‚Äûn√©pfajok‚Äù √©s nemzetis√©gek felv√©tele az orsz√°gos ar√°nyukhoz volt k√∂tve.", explanation: "A numerus clausus t√∂rv√©ny √©rtelm√©ben az egyetemi felv√©telikn√©l az egyes ‚Äûn√©pfajok‚Äù (els≈ësorban a zsid√≥s√°gra vonatkoztatva) √©s nemzetis√©gek ar√°ny√°t az orsz√°gos n√©pess√©gar√°nyukhoz igaz√≠tott√°k.", simple: "Korl√°tozt√°k, hogy melyik n√©pcsoportb√≥l h√°nyan mehetnek egyetemre." }},
            { section: "I. Teleki P√°l minisztereln√∂ks√©ge", question: "Milyen c√©lt szolg√°lt az ‚Äû≈ërs√©gv√°lt√°s‚Äù a numerus clausus kontextus√°ban?", answer: { short: "A zsid√≥ √©rtelmis√©g felv√°lt√°sa kereszt√©ny, nemzeti √©rtelmis√©gre.", explanation: "Az ‚Äû≈ërs√©gv√°lt√°s‚Äù kifejez√©s arra a folyamatra utalt, melynek sor√°n a zsid√≥ √©rtelmis√©get igyekeztek felv√°ltani egy kereszt√©ny, nemzeti elk√∂telezetts√©g≈± √©rtelmis√©gi r√©teggel.", simple: "A zsid√≥ okosokat lecser√©lt√©k kereszt√©ny magyar okosokra." }},
            { section: "I. Teleki P√°l minisztereln√∂ks√©ge", question: "Mikor t√∂rt√©nt az I. kir√°lypuccs, √©s ki k√≠s√©relte meg visszaszerezni a tr√≥nt?", answer: { short: "1921. m√°rc.-√°pr., IV. K√°roly.", explanation: "Az els≈ë kir√°lypuccs 1921 m√°rcius-√°prilis√°ban zajlott, amikor IV. K√°roly sikertelen k√≠s√©rletet tett a magyar tr√≥n visszaszerz√©s√©re.", simple: "IV. K√°roly kir√°ly 1921-ben megpr√≥b√°lt visszaj√∂nni, de nem j√∂tt √∂ssze neki." }},
            { section: "I. Teleki P√°l minisztereln√∂ks√©ge", question: "Mi lett Teleki P√°l sorsa az I. kir√°lypuccs ut√°n?", answer: { short: "Lemondott.", explanation: "Az els≈ë kir√°lypuccs kudarc√°t k√∂vet≈ëen Teleki P√°l minisztereln√∂k lemondott tiszts√©g√©r≈ël.", simple: "Teleki beadta a felmond√°s√°t a kir√°ly balh√©ja ut√°n." }},
            { section: "II. Bethlen Istv√°n politik√°ja", question: "Mely p√°rtokb√≥l j√∂tt l√©tre az Egys√©ges P√°rt, √©s milyen eszm√©ket vallott?", answer: { short: "Kisgazdap√°rt + KNEP = Egys√©ges P√°rt. Er≈ës korm√°nyp√°rt, elhat√°rol√≥dik a sz√©ls≈ës√©gekt≈ël, kereszt√©ny/nemzeti/konzervat√≠v.", explanation: "Az Egys√©ges P√°rt a Kisgazdap√°rt √©s a Kereszt√©ny Nemzeti Egyes√ºl√©s P√°rtj√°nak (KNEP) egyes√ºl√©s√©b≈ël j√∂tt l√©tre. C√©lja egy er≈ës korm√°nyp√°rt megteremt√©se volt, amely elhat√°rol√≥dik a sz√©ls≈ës√©gekt≈ël √©s kereszt√©ny, nemzeti, konzervat√≠v eszm√©ket vall.", simple: "K√©t p√°rt √∂ssze√°llt, hogy er≈ës legyen a korm√°ny, √©s ne legyenek sz√©ls≈ës√©gesek." }},
            { section: "II. Bethlen Istv√°n politik√°ja", question: "Mikor k√∂t√∂tt√©k a Bethlen-Peyer paktumot, √©s melyik p√°rt m≈±k√∂d√©s√©t korl√°tozta?", answer: { short: "1921-ben, az MSZDP (szoci√°ldemokrat√°k) m≈±k√∂d√©s√©t.", explanation: "A Bethlen-Peyer paktumot 1921-ben k√∂t√∂tt√©k, √©s a legjelent≈ësebb ellenz√©ki er≈ë, a Magyarorsz√°gi Szoci√°ldemokrata P√°rt (MSZDP) m≈±k√∂d√©s√©nek korl√°toz√°s√°t c√©lozta.", simple: "Bethlen megegyezett a szocdemekkel, hogy kicsit visszafogj√°k magukat." }},
            { section: "II. Bethlen Istv√°n politik√°ja", question: "Mir≈ël kellett lemondania az MSZDP-nek a Bethlen-Peyer paktum √©rtelm√©ben? (legal√°bb 2)", answer: { short: "Post√°sok, vasutasok, k√∂zalkalmazottak szervez√©s√©r≈ël; kapcsolatair√≥l a kommunist√°kkal; propagand√°r√≥l bel- √©s k√ºlf√∂ld√∂n.", explanation: "Az MSZDP a paktumban t√∂bbek k√∂z√∂tt lemondott a post√°sok, vasutasok, k√∂zalkalmazottak szervez√©s√©r≈ël, a kommunist√°kkal val√≥ kapcsolatair√≥l, valamint a bel- √©s k√ºlf√∂ldi propagandatev√©kenys√©gr≈ël.", simple: "A szocdemek nem szervezhett√©k a post√°sokat, vasutasokat, √©s nem haverkodhattak a komcsikkal." }},
            { section: "II. Bethlen Istv√°n politik√°ja", question: "Mit kapott cser√©be az MSZDP a Bethlen-Peyer paktum√©rt?", answer: { short: "T√∂rv√©nyesen m≈±k√∂dhettek; indulhattak a v√°laszt√°sokon.", explanation: "A v√°llalt korl√°toz√°sok√©rt cser√©be az MSZDP t√∂rv√©nyes keretek k√∂z√∂tt m≈±k√∂dhetett tov√°bb, √©s r√©szt vehetett a v√°laszt√°sokon.", simple: "Cser√©be a szocdemek leg√°lisan m≈±k√∂dhettek √©s v√°laszt√°sokon is indulhattak." }},
            { section: "II. Bethlen Istv√°n politik√°ja", question: "Mi volt az √∫j v√°laszt√≥jogi t√∂rv√©ny c√©lja Bethlen alatt, √©s milyen f≈ëbb jellemz≈ëi voltak?", answer: { short: "Korm√°nyp√°rt parlamenti t√∂bbs√©g√©nek biztos√≠t√°sa. Cenzusos v√°laszt√≥jog, ny√≠lt v√°laszt√°si rendszer (nagyv√°rosok kiv√©tel√©vel).", explanation: "Az √∫j v√°laszt√≥jogi t√∂rv√©ny bevezet√©s√©nek c√©lja a korm√°nyp√°rt parlamenti t√∂bbs√©g√©nek biztos√≠t√°sa volt. Ezt cenzusos v√°laszt√≥joggal (vagyon, kor, m≈±velts√©g alapj√°n) √©s a nagyv√°rosok kiv√©tel√©vel ny√≠lt v√°laszt√°si rendszerrel √©rt√©k el.", simple: "√ögy alak√≠tott√°k a v√°laszt√°st, hogy a korm√°ny nyerjen. Nem mindenki szavazhatott, √©s sok helyen nem volt titkos." }},
            { section: "II. Bethlen Istv√°n politik√°ja", question: "Hogyan jellemezhet≈ë a Bethlen-korszak parlamentarizmusa a tananyag szerint?", answer: { short: "Korl√°tozott parlamentarizmus: nehezen lev√°lthat√≥ korm√°nyp√°rt, gyenge ellenz√©k, radik√°lis v√°ltoz√°sok akad√°lyozva ‚Üí orsz√°g talpra √°llhatott.", explanation: "A Bethlen-korszak parlamentarizmus√°t korl√°tozottnak nevezik, ahol a korm√°nyp√°rt nehezen volt lev√°lthat√≥, az ellenz√©k gyenge maradt, √©s a radik√°lis v√°ltoz√°sokat megakad√°lyozt√°k. Ez a stabilit√°s hozz√°j√°rult az orsz√°g talpra √°ll√°s√°hoz.", simple: "A korm√°ny nagyon er≈ës volt, az ellenz√©k gyenge. √çgy tudott az orsz√°g kicsit √∂sszeszedni mag√°t." }},
            { section: "II. Bethlen Istv√°n politik√°ja", question: "Mikor volt a II. sikertelen kir√°lypuccs, hol volt a csata, √©s mi lett a kir√°ly sorsa?", answer: { short: "1921. okt., buda√∂rsi csata, a kir√°ly sz√°m≈±z√©se.", explanation: "A m√°sodik sikertelen kir√°lypuccsra 1921 okt√≥ber√©ben ker√ºlt sor, a d√∂nt≈ë √ºtk√∂zet Buda√∂rsn√©l zajlott. Ezt k√∂vet≈ëen IV. K√°rolyt sz√°m≈±zt√©k.", simple: "IV. K√°roly megint megpr√≥b√°lta 1921-ben, de Buda√∂rsn√©l elvert√©k, √©s elk√ºldt√©k messzire." }},
            { section: "II. Bethlen Istv√°n politik√°ja", question: "Milyen t√∂rv√©nyt hoztak 1921 november√©ben a Habsburg-h√°zzal kapcsolatban?", answer: { short: "Habsburg-h√°z tr√≥nfoszt√°sa ‚Äì detroniz√°ci√≥.", explanation: "A m√°sodik kir√°lypuccs ut√°n, 1921 november√©ben t√∂rv√©nyt hoztak a Habsburg-h√°z tr√≥nfoszt√°s√°r√≥l, amit detroniz√°ci√≥nak neveznek.", simple: "Kimondt√°k, hogy a Habsburgok t√∂bbet nem lehetnek magyar kir√°lyok." }},
            { section: "III. Gazdas√°gi konszolid√°ci√≥", question: "Mi√©rt volt sz√ºks√©g gazdas√°gi szerkezetv√°lt√°sra az 1920-as √©vekben? (Legal√°bb 2 ok)", answer: { short: "I. vil√°gh√°bor√∫, Monarchia felboml√°sa, Trianon gazdas√°gi k√∂vetkezm√©nyei, infl√°ci√≥s politika vesz√©lyei.", explanation: "A gazdas√°gi szerkezetv√°lt√°s sz√ºks√©gess√©g√©t az els≈ë vil√°gh√°bor√∫, az Osztr√°k-Magyar Monarchia felboml√°sa, a trianoni b√©keszerz≈ëd√©s s√∫lyos gazdas√°gi k√∂vetkezm√©nyei, valamint az addig folytatott, p√©nzkibocs√°t√°son alapul√≥ infl√°ci√≥s politika vesz√©lyei indokolt√°k.", simple: "A h√°bor√∫ √©s Trianon t√∂nkretette a gazdas√°got, v√°ltoztatni kellett." }},
            { section: "III. Gazdas√°gi konszolid√°ci√≥", question: "Melyik √©vben l√©pett Magyarorsz√°g a N√©psz√∂vets√©gbe, √©s milyen gazdas√°gi el≈ënnyel j√°rt ez?", answer: { short: "1922, k√∂lcs√∂nfelv√©tel (250 milli√≥ aranykorona) ‚Üí √°llami beruh√°z√°sok.", explanation: "Magyarorsz√°g 1922-ben l√©pett be a N√©psz√∂vets√©gbe, ami lehet≈ëv√© tette egy 250 milli√≥ aranykoron√°s k√∂lcs√∂n felv√©tel√©t, amelyb≈ël √°llami beruh√°z√°sokat kezdem√©nyezhettek.", simple: "Bel√©pt√ºnk a N√©psz√∂vets√©gbe, √©s kaptunk egy csom√≥ p√©nzt k√∂lcs√∂nbe, amib≈ël fejleszteni tudtunk." }},
            { section: "III. Gazdas√°gi konszolid√°ci√≥", question: "Mikor j√∂tt l√©tre a Magyar Nemzeti Bank?", answer: { short: "1924-ben.", explanation: "A Magyar Nemzeti Bank 1924-ben j√∂tt l√©tre a gazdas√°gi konszolid√°ci√≥ r√©szek√©nt.", simple: "1924-ben lett saj√°t k√∂zponti bankunk." }},
            { section: "III. Gazdas√°gi konszolid√°ci√≥", question: "Mikor vezett√©k be az √∫j, √©rt√©k√°ll√≥ p√©nznemet, √©s mi volt a neve?", answer: { short: "1927-ben, a peng≈ë.", explanation: "1927-ben vezett√©k be az √∫j, √©rt√©k√°ll√≥ p√©nznemet, a peng≈ët, amely stabil alapot biztos√≠tott a gazdas√°gnak.", simple: "1927-t≈ël lett a peng≈ë a p√©nz√ºnk, ami m√°r nem √©rt√©ktelenedett el olyan gyorsan." }},
            { section: "III. Gazdas√°gi konszolid√°ci√≥", question: "Milyen ipar√°gak moderniz√°ci√≥ja t√∂rt√©nt a gazdas√°gi szerkezetv√°lt√°s sor√°n? (Legal√°bb 2)", answer: { short: "K√∂nny≈±ipar: textilipar, konzervipar; elektronika.", explanation: "A gazdas√°gi szerkezetv√°lt√°s sor√°n moderniz√°lt√°k a k√∂nny≈±ipart (pl. textilipar, konzervipar) √©s fejlesztett√©k az elektronikai ipart.", simple: "Fejlesztett√©k a textil-, konzerv- √©s elektronikai gy√°rakat." }},
            { section: "III. Gazdas√°gi konszolid√°ci√≥", question: "Mi indokolta a turizmus fejleszt√©s√©t (pl. Lillaf√ºred)?", answer: { short: "A trianoni b√©keszerz≈ëd√©s (elveszett √ºd√ºl≈ëhelyek p√≥tl√°sa).", explanation: "A turizmus fejleszt√©s√©t, p√©ld√°ul utak √©s sz√°llod√°k √©p√≠t√©s√©t (mint Lillaf√ºreden), a trianoni b√©keszerz≈ëd√©s indokolta, mivel az orsz√°g elvesztette hagyom√°nyos √ºd√ºl≈ëter√ºleteit.", simple: "Trianon miatt elcsatolt√°k a r√©gi nyaral√≥helyeket, ez√©rt √∫jakat kellett √©p√≠teni itthon." }},
            { section: "III. Gazdas√°gi konszolid√°ci√≥", question: "Milyen feladatot jelentett a repatri√°ltak elhelyez√©se?", answer: { short: "Fontos feladat volt a Trianon ut√°n √©rkez≈ëk elhelyez√©se.", explanation: "A Trianon ut√°n az anyaorsz√°gba √©rkez≈ë menek√ºltek (repatri√°ltak) elhelyez√©se komoly t√°rsadalmi √©s gazdas√°gi feladatot jelentett.", simple: "Sok magyar j√∂tt haza az elcsatolt r√©szekr≈ël, nekik lak√°st kellett adni." }},
            { section: "III. Gazdas√°gi konszolid√°ci√≥", question: "Milyen t√≠pus√∫ orsz√°gg√° v√°lt Magyarorsz√°g a gazdas√°gi konszolid√°ci√≥ k√∂vetkezt√©ben?", answer: { short: "Agr√°r-ipari orsz√°gg√° (az ipar egyre jelent≈ësebb lett a mez≈ëgazdas√°g mellett).", explanation: "A gazdas√°gi konszolid√°ci√≥ eredm√©nyek√©nt Magyarorsz√°g agr√°r-ipari orsz√°gg√° v√°lt, ahol a mez≈ëgazdas√°g mellett az ipar is egyre jelent≈ësebb szerephez jutott.", simple: "Nemcsak f√∂ldm≈±vel√©sb≈ël √©lt√ºnk, hanem a gy√°rak is fontosak lettek." }},
            { section: "IV. Bethlen k√ºlpolitik√°ja", question: "Melyik √°llamsz√∂vets√©g korl√°tozta Magyarorsz√°g mozg√°ster√©t, √©s melyik nagyhatalom √°llt m√∂g√∂tte?", answer: { short: "A Kis√°ntant, m√∂g√∂tte Franciaorsz√°g.", explanation: "Magyarorsz√°g k√ºlpolitikai mozg√°ster√©t a Kis√°ntant (Csehszlov√°kia, Rom√°nia, Jugoszl√°via) korl√°tozta, amelyet Franciaorsz√°g t√°mogatott.", simple: "A szomsz√©d orsz√°gok (Kis√°ntant) √©s Franciaorsz√°g nem hagyt√°k, hogy Magyarorsz√°g sokat ugr√°ljon." }},
            { section: "IV. Bethlen k√ºlpolitik√°ja", question: "Mikor csatlakozott Magyarorsz√°g a N√©psz√∂vets√©ghez?", answer: { short: "1922-ben.", explanation: "Magyarorsz√°g 1922-ben csatlakozott a N√©psz√∂vets√©ghez, ami fontos l√©p√©s volt a nemzetk√∂zi elszigetelts√©gb≈ël val√≥ kit√∂r√©s fel√©.", simple: "1922-ben bel√©pt√ºnk a 'vil√°g orsz√°gainak klubj√°ba'." }},
            { section: "IV. Bethlen k√ºlpolitik√°ja", question: "Melyik d√©lszl√°v √°llamhoz pr√≥b√°lt k√∂zeledni Magyarorsz√°g Bethlen alatt, √©s mi√©rt?", answer: { short: "A Szerb-Horv√°t-Szlov√©n Kir√°lys√°ghoz (Jugoszl√°via); egys√©g megbont√°sa + enyhe s√©relmek orvosl√°sa.", explanation: "Bethlen k√ºlpolitik√°ja pr√≥b√°lt k√∂zeledni a Szerb-Horv√°t-Szlov√©n Kir√°lys√°ghoz (a k√©s≈ëbbi Jugoszl√°vi√°hoz), r√©szben annak egys√©g√©t megbontani k√≠v√°nva, r√©szben pedig enyhe s√©relmek orvosl√°sa √©rdek√©ben.", simple: "Pr√≥b√°ltunk j√≥ban lenni Jugoszl√°vi√°val, h√°tha sz√©tesnek, vagy visszakapunk valamit." }},
            { section: "IV. Bethlen k√ºlpolitik√°ja", question: "Melyik orsz√°ggal k√∂t√∂tt Magyarorsz√°g √∂r√∂kbar√°ts√°gi szerz≈ëd√©st 1927-ben?", answer: { short: "Olaszorsz√°ggal.", explanation: "1927-ben Magyarorsz√°g √©s Olaszorsz√°g √∂r√∂kbar√°ts√°gi szerz≈ëd√©st k√∂t√∂tt, ami jelent≈ës k√ºlpolitikai l√©p√©s volt.", simple: "Bethlen√©k az olaszokkal lettek j√≥bar√°tok 1927-ben." }}
        ];

        const quizSectionTitleDisplay = document.getElementById('quiz-section-title-display');
        const quizQuestionDisplay = document.getElementById('question-display');
        const quizAnswerDisplayContainer = document.getElementById('answer-display-container');
        const quizAnswerDisplay = document.getElementById('answer-display');
        const quizExplanationDisplay = document.getElementById('explanation-display');
        const simpleExplanationDisplay = document.getElementById('simple-explanation-display');
        const quizShowAnswerBtn = document.getElementById('show-answer-btn');
        const quizNextQuestionBtn = document.getElementById('next-question-btn');
        
        function loadRandomQuizQuestion() {
            if (allQuizQuestions.length === 0) {
                if(quizQuestionDisplay) quizQuestionDisplay.textContent = "Nincsenek k√©rd√©sek a kv√≠zhez.";
                if(quizShowAnswerBtn) quizShowAnswerBtn.disabled = true;
                if(quizNextQuestionBtn) quizNextQuestionBtn.disabled = true;
                return;
            }
            
            const randomIndex = Math.floor(Math.random() * allQuizQuestions.length);
            const q = allQuizQuestions[randomIndex];

            if(quizSectionTitleDisplay) quizSectionTitleDisplay.textContent = q.section;
            if(quizQuestionDisplay) quizQuestionDisplay.textContent = q.question;
            if(quizAnswerDisplay) quizAnswerDisplay.textContent = q.answer.short;
            if(quizExplanationDisplay) quizExplanationDisplay.textContent = q.answer.explanation;
            if(simpleExplanationDisplay) simpleExplanationDisplay.textContent = q.answer.simple;
            if(quizAnswerDisplayContainer) quizAnswerDisplayContainer.style.display = 'none';
            if(quizShowAnswerBtn) quizShowAnswerBtn.disabled = false;
            if(quizNextQuestionBtn) {
                quizNextQuestionBtn.disabled = false; 
                quizNextQuestionBtn.textContent = "M√°sik K√©rd√©s";
            }
        }

        function showQuizAnswer() {
            if(quizAnswerDisplayContainer) quizAnswerDisplayContainer.style.display = 'block';
        }
        
        const timelineEvents = [ 
            { text: "Teleki P√°l minisztereln√∂ks√©g√©nek kezdete", year: 1920, month: 7, sortKey: 1920.07 },
            { text: "A Numerus Clausus t√∂rv√©ny bevezet√©se", year: 1920, month: 9, sortKey: 1920.09 }, 
            { text: "Az I. kir√°lypuccs (IV. K√°roly k√≠s√©rlete)", year: 1921, month: 3, sortKey: 1921.03 }, 
            { text: "Teleki P√°l lemond√°sa", year: 1921, month: 4, sortKey: 1921.04 },
            { text: "Bethlen Istv√°n minisztereln√∂ks√©g√©nek kezdete", year: 1921, month: 4, sortKey: 1921.041 }, 
            { text: "A Bethlen-Peyer paktum megk√∂t√©se", year: 1921, month: 12, sortKey: 1921.12 }, 
            { text: "A II. kir√°lypuccs (buda√∂rsi csata)", year: 1921, month: 10, sortKey: 1921.10 },
            { text: "A Habsburg-h√°z tr√≥nfoszt√°sa (detroniz√°ci√≥)", year: 1921, month: 11, sortKey: 1921.11 },
            { text: "Magyarorsz√°g bel√©p√©se a N√©psz√∂vets√©gbe", year: 1922, month: 9, sortKey: 1922.09 }, 
            { text: "Az √∫j v√°laszt√≥jogi t√∂rv√©ny bevezet√©se (Bethlen)", year: 1922, month: 3, sortKey: 1922.03 }, 
            { text: "A Magyar Nemzeti Bank l√©trehoz√°sa", year: 1924, month: 6, sortKey: 1924.06 }, 
            { text: "Az √∫j p√©nznem, a peng≈ë bevezet√©se", year: 1927, month: 1, sortKey: 1927.01 }, 
            { text: "Az olasz-magyar √∂r√∂kbar√°ts√°gi szerz≈ëd√©s megk√∂t√©se", year: 1927, month: 4, sortKey: 1927.04 }
        ];

        let currentEventPair = [];
        let timelineAttempts = 0;
        let timelineCorrectAnswers = 0;
        let timelineTotalScore = 0; // √öj v√°ltoz√≥ a pontokhoz
        let currentPairStartTime = 0;
        let timelineGameActive = false;
        let timelineRoundsPlayed = 0;
        const TIMELINE_ROUNDS_TOTAL = 10;
        let correctOrderShown = false;

        const timelineStartScreen = document.getElementById('timeline-start-screen');
        const timelineGameContent = document.getElementById('timeline-game-content');
        const eventABtn = document.getElementById('eventA-btn');
        const eventBBtn = document.getElementById('eventB-btn');
        const timelineFeedback = document.getElementById('timeline-feedback');
        const nextPairBtn = document.getElementById('next-pair-btn');
        const timelineRoundCounter = document.getElementById('timeline-round-counter');
        const showTimelineOrderBtn = document.getElementById('show-timeline-order-btn');
        const timelineCorrectOrderContainer = document.getElementById('timeline-correct-order-container');
        const timelineCorrectOrderList = document.getElementById('timeline-correct-order-list');
        const startTimelineGameBtn = document.getElementById('start-timeline-game-btn');

        const finalTimelineStatsDiv = document.getElementById('final-timeline-stats');
        const finalScoreDisplay = document.getElementById('final-score-display'); // √öj ID a HTML-ben
        const finalAccuracyDisplay = document.getElementById('final-accuracy-display');
        // const finalAvgTimeDisplay = document.getElementById('final-avg-time-display'); // Ezt m√°r nem haszn√°ljuk a rangol√°shoz, de ki√≠rathatjuk
        const finalEmojiRankDisplay = document.getElementById('final-emoji-rank-display'); 


        function toggleShowCorrectTimelineOrder() {
            if (timelineGameActive) { 
                timelineGameActive = false; 
                if(timelineGameContent) timelineGameContent.style.display = 'none'; 
                if(finalTimelineStatsDiv) finalTimelineStatsDiv.style.display = 'none'; 
                if(timelineFeedback) timelineFeedback.textContent = "A j√°t√©k le√°llt a sorrend megtekint√©se miatt.";
                if(nextPairBtn) nextPairBtn.disabled = true;
                if(eventABtn) eventABtn.disabled = true; 
                if(eventBBtn) eventBBtn.disabled = true; 
            }
            
            if (timelineCorrectOrderContainer && timelineCorrectOrderContainer.style.display === 'none') {
                const sortedEvents = [...timelineEvents].sort((a, b) => a.sortKey - b.sortKey);
                if(timelineCorrectOrderList) timelineCorrectOrderList.innerHTML = ''; 
                sortedEvents.forEach(event => {
                    const listItem = document.createElement('li');
                    listItem.textContent = `${event.text} (${event.year}${event.month ? '.'+String(event.month).padStart(2,'0') : ''})`;
                    if(timelineCorrectOrderList) timelineCorrectOrderList.appendChild(listItem);
                });
                timelineCorrectOrderContainer.style.display = 'block';
                if(showTimelineOrderBtn) showTimelineOrderBtn.textContent = 'Sorrend Elrejt√©se';
                if(startTimelineGameBtn) startTimelineGameBtn.disabled = true; 
                correctOrderShown = true;
                if(timelineStartScreen) timelineStartScreen.style.display = 'none'; 
            } else if (timelineCorrectOrderContainer) {
                timelineCorrectOrderContainer.style.display = 'none';
                if(showTimelineOrderBtn) showTimelineOrderBtn.textContent = 'Helyes Sorrend';
                if(startTimelineGameBtn) startTimelineGameBtn.disabled = false; 
                correctOrderShown = false;
                if (!timelineGameActive ) { 
                     if(timelineStartScreen) timelineStartScreen.style.display = 'block';
                     if(finalTimelineStatsDiv) finalTimelineStatsDiv.style.display = 'none'; 
                }
            }
        }

        function startTimelineGame() {
            if (correctOrderShown) {
                alert("A j√°t√©k nem ind√≠that√≥, am√≠g a helyes sorrend l√°that√≥. K√©rlek, el≈ëbb rejtsd el a sorrendet!");
                return;
            }
            if(timelineStartScreen) timelineStartScreen.style.display = 'none';
            if(finalTimelineStatsDiv) finalTimelineStatsDiv.style.display = 'none'; 
            if(timelineGameContent) timelineGameContent.style.display = 'block';
            if(document.querySelector('.event-options')) document.querySelector('.event-options').style.display = 'block';
            timelineGameActive = true;
            timelineRoundsPlayed = 0;
            resetTimelineGameStats(); 
            loadNewEventPair();
        }
        
        function resetTimelineGameStats() { 
            timelineAttempts = 0;
            timelineCorrectAnswers = 0;
            timelineTotalScore = 0; // √öj pontsz√°m null√°z√°sa
        }

        function getTimelineEmojiRank() {
            const maxPossibleScore = TIMELINE_ROUNDS_TOTAL * 1; // Max 1 pont k√∂r√∂nk√©nt
            const scorePercentage = maxPossibleScore > 0 ? (timelineTotalScore / maxPossibleScore) * 100 : 0;

            if (scorePercentage === 100) return "üíØ";
            if (scorePercentage >= 90) return "ü•á";
            if (scorePercentage >= 80) return "ü•à";
            if (scorePercentage >= 70) return "ü•â";
            return "üëé"; 
        }

        function showFinalTimelineStats() {
            if(timelineGameContent) timelineGameContent.style.display = 'none';
            if(finalTimelineStatsDiv) finalTimelineStatsDiv.style.display = 'block';
            timelineGameActive = false; 

            if(finalScoreDisplay) finalScoreDisplay.textContent = `${timelineTotalScore.toFixed(1)}`; // Pontsz√°m ki√≠r√°sa
            const accuracy = timelineAttempts > 0 ? ((timelineCorrectAnswers / timelineAttempts) * 100).toFixed(0) : 0;
            if(finalAccuracyDisplay) finalAccuracyDisplay.textContent = accuracy;
            // Az √°tlagid≈ë kijelz√©s√©t kivettem, mert a pontoz√°s m√°r tartalmazza az id≈ëfaktort. Ha m√©gis kell:
            // const avgTimeDisplayValue = timelineCorrectAnswers > 0 ? (totalTimelineResponseTimeForCorrect / timelineCorrectAnswers / 1000).toFixed(1) : "N/A";
            // if(finalAvgTimeDisplay) finalAvgTimeDisplay.textContent = avgTimeDisplayValue; 
            
            if(finalEmojiRankDisplay) finalEmojiRankDisplay.textContent = getTimelineEmojiRank();
        }
        
        function loadNewEventPair() {
            if (!timelineGameActive) return; 

            if (timelineRoundsPlayed >= TIMELINE_ROUNDS_TOTAL) {
                showFinalTimelineStats();
                return;
            }
            timelineRoundsPlayed++;
            if(timelineRoundCounter) timelineRoundCounter.textContent = timelineRoundsPlayed;

            if (timelineEvents.length < 2) {
                if(timelineFeedback) timelineFeedback.textContent = "Nincs el√©g esem√©ny a j√°t√©khoz.";
                if(eventABtn) eventABtn.style.display = "none";
                if(eventBBtn) eventBBtn.style.display = "none";
                if(nextPairBtn) nextPairBtn.disabled = true;
                return;
            }
            if(eventABtn) eventABtn.style.display = "block";
            if(eventBBtn) eventBBtn.style.display = "block";

            let indexA = Math.floor(Math.random() * timelineEvents.length);
            let indexB = Math.floor(Math.random() * timelineEvents.length);
            while (indexB === indexA) {
                indexB = Math.floor(Math.random() * timelineEvents.length);
            }
            currentEventPair = Math.random() < 0.5 ? [timelineEvents[indexA], timelineEvents[indexB]] : [timelineEvents[indexB], timelineEvents[indexA]];
            
            if(eventABtn) eventABtn.textContent = currentEventPair[0].text;
            if(eventBBtn) eventBBtn.textContent = currentEventPair[1].text;

            if(eventABtn) eventABtn.classList.remove('correct', 'incorrect');
            if(eventBBtn) eventBBtn.classList.remove('correct', 'incorrect');
            if(eventABtn) eventABtn.disabled = false;
            if(eventBBtn) eventBBtn.disabled = false;
            if(timelineFeedback) timelineFeedback.textContent = "V√°rom a v√°laszod...";
            if(nextPairBtn) nextPairBtn.disabled = true; 
            currentPairStartTime = Date.now();
        }

        function checkTimelineOrder(selectedIndex) { 
            if (!timelineGameActive) return; 
            
            const responseTimeSeconds = (Date.now() - currentPairStartTime) / 1000;
            timelineAttempts++; 

            const chosenEvent = currentEventPair[selectedIndex];
            const actualEarlierEvent = currentEventPair[0].sortKey < currentEventPair[1].sortKey ? currentEventPair[0] : currentEventPair[1];

            if(eventABtn) eventABtn.disabled = true;
            if(eventBBtn) eventBBtn.disabled = true;
            if(nextPairBtn) nextPairBtn.disabled = false;

            if (chosenEvent.sortKey === actualEarlierEvent.sortKey) {
                if(timelineFeedback) timelineFeedback.textContent = `Helyes! (${responseTimeSeconds.toFixed(1)} mp)`;
                if(timelineFeedback) timelineFeedback.style.color = "#2ECC71"; 
                if (selectedIndex === 0 && eventABtn) eventABtn.classList.add('correct');
                else if (selectedIndex === 1 && eventBBtn) eventBBtn.classList.add('correct');
                timelineCorrectAnswers++; 
                if (responseTimeSeconds <= 3) {
                    timelineTotalScore += 1;
                } else {
                    timelineTotalScore += 0.5;
                }
            } else {
                if(timelineFeedback) timelineFeedback.textContent = `Helytelen. A kor√°bbi: ${actualEarlierEvent.text} (${responseTimeSeconds.toFixed(1)} mp)`;
                if(timelineFeedback) timelineFeedback.style.color = "#E74C3C";
                if (selectedIndex === 0 && eventABtn) eventABtn.classList.add('incorrect');
                else if (selectedIndex === 1 && eventBBtn) eventBBtn.classList.add('incorrect');
                
                if(currentEventPair[0].sortKey === actualEarlierEvent.sortKey && eventABtn) eventABtn.classList.add('correct');
                else if (currentEventPair[1].sortKey === actualEarlierEvent.sortKey && eventBBtn) eventBBtn.classList.add('correct');
                // Helytelen v√°lasz√©rt nem adunk pontot (timelineTotalScore nem n√∂vekszik)
            }
        }
        
        window.onload = () => {
            loadRandomQuizQuestion(); 
            if(timelineStartScreen) timelineStartScreen.style.display = 'block';
            if(timelineGameContent) timelineGameContent.style.display = 'none';
            if(finalTimelineStatsDiv) finalTimelineStatsDiv.style.display = 'none';
            if(showTimelineOrderBtn) showTimelineOrderBtn.disabled = false; 
            if(timelineCorrectOrderContainer) timelineCorrectOrderContainer.style.display = 'none'; 
        };
    </script>
</body>
</html>
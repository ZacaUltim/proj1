<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T√∂rt√©nelmi Kv√≠z √©s Id≈ërend Gyakorl√≥</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4; /* Vil√°gossz√ºrke h√°tt√©r */
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }
        .game-section {
            background-color: #ffffff; /* Feh√©r szekci√≥k */
            padding: 25px 30px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            width: 90%;
            max-width: 800px;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        h1, h2 {
            color: #2c3e50; /* S√∂t√©tk√©k-sz√ºrke */
            text-align: center;
            margin-bottom: 20px;
        }
        h1 { font-size: 2em; }
        h2 { font-size: 1.6em; margin-top: 25px; border-bottom: 1px solid #ddd; padding-bottom: 10px;}

        /* Kv√≠z specifikus */
        .question-area { margin-bottom: 20px; }
        .question-section-title {
            font-size: 0.9em; color: #555; margin-bottom: 8px;
            font-weight: bold; border-left: 3px solid #007bff; padding-left: 10px;
        }
        .question-text { font-size: 1.15em; margin-bottom: 15px; line-height: 1.6; color: #17a2b8; /* Info k√©k */ }
        .answer-container {
            margin-top: 15px; padding: 15px; background-color: #e9ecef; /* Vil√°gos h√°tt√©r */
            border: 1px solid #ced4da; border-radius: 6px; display: none;
        }
        .answer-title, .explanation-title, .simple-explanation-title { 
            font-weight: bold; display: block; margin-bottom: 5px; 
            font-size: 1.05em;
        }
        .answer-title { color: #28a745; /* Siker z√∂ld */}
        .explanation-title { color: #007bff; /* Els≈ëdleges k√©k */}
        .simple-explanation-title { color: #fd7e14; /* Narancs */}

        .answer-text, .explanation-text, .simple-explanation-text { 
            margin-bottom: 10px; line-height: 1.5;
            font-size: 1em;
        }
        .answer-text { color: #218838; } 
        .explanation-text { color: #0056b3; } 
        .simple-explanation-text { color: #c65e0a; font-style: italic;} 
        
        /* Id≈ërend j√°t√©k specifikus */
        .event-options button {
            display: block; width: 100%; padding: 12px; margin-bottom: 10px;
            border: 1px solid #007bff; 
            background-color: #f8f9fa; 
            color: #333; cursor: pointer; border-radius: 5px;
            text-align: left; font-size: 1em; transition: background-color 0.2s;
        }
        .event-options button:hover { background-color: #e2e6ea;}
        .event-options button.correct { background-color: #d4edda; border-color: #c3e6cb; color: #155724; } 
        .event-options button.incorrect { background-color: #f8d7da; border-color: #f5c6cb; color: #721c24; } 
        #timeline-feedback { margin-top: 15px; font-weight: bold; text-align: center; font-size: 1.05em; min-height: 1.4em;}
        
        .button-container { display: flex; justify-content: space-around; margin-top: 25px; }
        button {
            padding: 10px 20px; border: none; border-radius: 5px; 
            background-color: #007bff; 
            color: white; cursor: pointer; font-size: 1em;
            transition: background-color 0.2s;
        }
        button:hover { background-color: #0056b3; }
        button:disabled { background: #6c757d; color: #ccc; cursor: not-allowed; }
        
        .stats-display {
            margin-top: 20px; padding: 15px; background-color: #f8f9fa; 
            border-radius: 6px; border: 1px solid #dee2e6; 
            text-align: center;
        }
        .stats-display p { margin: 6px 0; font-size: 1em; color: #495057;}
        .stats-display .label { color: #007bff; font-weight: bold;}
        .stats-display .medal { font-size: 2.2em; margin-top: 5px; }
    </style>
</head>
<body>
    <h1>T√∂rt√©nelmi Kv√≠z √©s Id≈ërend Gyakorl√≥</h1>
    <p style="text-align:center; font-size:1em; color:#555;">Tedd pr√≥b√°ra tud√°sod a Teleki √©s Bethlen korszakr√≥l!</p>

    <div class="game-section" id="quiz-section-container">
        <h2>Kv√≠z</h2>
        <p style="text-align: center; font-size: 0.9em; color: #6c757d; margin-bottom: 20px;">Haladj v√©gig a k√©rd√©seken. A v√°laszok megtekint√©se ut√°n a v√©g√©n √©rt√©kel√©st kapsz.</p>
        
        <div class="question-area">
            <div id="quiz-section-title-display" class="question-section-title">T√©mak√∂r</div>
            <div id="question-display" class="question-text">Kattints a "Start / K√∂vetkez≈ë k√©rd√©s" gombra!</div>
            <div id="answer-display-container" class="answer-container">
                <strong class="answer-title">Helyes v√°lasz:</strong>
                <div id="answer-display" class="answer-text"></div>
                <strong class="explanation-title">Magyar√°zat:</strong>
                <div id="explanation-display" class="explanation-text"></div>
                <strong class="simple-explanation-title">Egyszer≈±en (L√©nyeg√©ben):</strong>
                <div id="simple-explanation-display" class="simple-explanation-text"></div>
            </div>
        </div>

        <div class="button-container">
            <button id="show-answer-btn" onclick="showQuizAnswer()" disabled>V√°lasz mutat√°sa</button>
            <button id="next-question-btn" onclick="nextQuizQuestion()">Start / K√∂vetkez≈ë k√©rd√©s</button>
        </div>
        <div class="stats-display" id="quiz-stats">
            <p><span class="label">Halad√°s:</span> <span id="progress-info">0/0</span></p>
            <p><span class="label">Eltelt id≈ë:</span> <span id="quiz-timer-display">00:00</span></p>
            <p><span class="label">Pontsz√°m:</span> <span id="quiz-score-display">0</span></p>
            <p class="medal" id="quiz-medal-display">üèÖ</p>
            <button id="reset-quiz-btn" onclick="resetQuiz()" style="display:none; margin-top:10px;">Kv√≠z √∫jraind√≠t√°sa</button>
        </div>
    </div>

    <div class="game-section" id="timeline-section-container">
        <h2>Id≈ërend Gyakorl√≥</h2>
        <p style="text-align: center; font-size: 0.9em; color: #6c757d; margin-bottom: 15px;">V√°laszd ki, melyik esem√©ny t√∂rt√©nt kor√°bban!</p>
        <div id="event-pair-display">
            <p style="text-align:center; font-weight:bold; font-size:1.1em; color: #dc3545;">Melyik volt el≈ëbb?</p> <!-- Figyelemfelkelt≈ë piros -->
            <div class="event-options">
                <button id="eventA-btn" onclick="checkTimelineOrder(0)">Esem√©ny A</button>
                <button id="eventB-btn" onclick="checkTimelineOrder(1)">Esem√©ny B</button>
            </div>
        </div>
        <div id="timeline-feedback">V√°rom a v√°laszod...</div>
        <div class="button-container" style="justify-content: center;">
            <button id="next-pair-btn" onclick="loadNewEventPair()">K√∂vetkez≈ë p√°r</button>
        </div>
        <div class="stats-display" id="timeline-stats">
            <p><span class="label">Pr√≥b√°lkoz√°sok:</span> <span id="timeline-attempts-display">0</span></p>
            <p><span class="label">Helyes v√°laszok:</span> <span id="timeline-correct-display">0</span> (<span id="timeline-accuracy-display">0</span>%)</p>
            <p><span class="label">√Åtlagos v√°laszid≈ë:</span> <span id="timeline-avg-time-display">N/A</span> mp</p>
            <p class="medal" id="timeline-medal-display">‚è≥</p>
            <button id="reset-timeline-btn" onclick="resetTimelineGame()" style="margin-top:10px;">Id≈ërend j√°t√©k √∫jraind√≠t√°sa</button>
        </div>
    </div>

    <script>
        // --- √Åltal√°nos seg√©df√ºggv√©nyek ---
        function shuffleArray(array) { /* ... (marad) ... */ }
        function formatTime(seconds) { /* ... (marad) ... */ }

        // --- R√©szletes Kv√≠z Logika ---
        const allQuizQuestions = [
            { 
                section: "I. Teleki P√°l minisztereln√∂ks√©ge", 
                question: "Mikor volt Teleki P√°l els≈ë minisztereln√∂ks√©ge?", 
                answer: {
                    short: "1920. j√∫lius ‚Äì 1921. √°prilis.",
                    explanation: "Teleki P√°l els≈ë minisztereln√∂ki id≈ëszaka 1920 j√∫lius√°t√≥l 1921 √°prilis√°ig tartott, a Tan√°csk√∂zt√°rsas√°g buk√°sa √©s a trianoni b√©keszerz≈ëd√©s ut√°ni neh√©z id≈ëkben.",
                    simple: "Teleki 1920-21 k√∂r√ºl volt el≈ësz√∂r a f≈ën√∂k, amikor nagy volt a k√°osz az orsz√°gban."
                }
            },
            { 
                section: "I. Teleki P√°l minisztereln√∂ks√©ge", 
                question: "Ki volt a f√∂ldm≈±vel√©si miniszter Teleki korm√°ny√°ban, aki a f√∂ldreformot kidolgozta?", 
                answer: {
                    short: "Nagyat√°di Szab√≥ Istv√°n.",
                    explanation: "Nagyat√°di Szab√≥ Istv√°n, a Kisgazdap√°rt vezet≈ë politikusa volt a f√∂ldm≈±vel√©si miniszter, √©s ≈ë felelt a Teleki-korm√°ny f√∂ldreformj√°nak el≈ëk√©sz√≠t√©s√©√©rt.",
                    simple: "Nagyat√°di Szab√≥ Istv√°n pr√≥b√°lt f√∂ldet adni a parasztoknak Teleki idej√©n."
                }
            },
            { 
                section: "I. Teleki P√°l minisztereln√∂ks√©ge", 
                question: "H√°ny paraszt kapott f√∂ldet a Teleki-f√©le f√∂ldreform sor√°n, √©s milyen m√©rt√©k≈±t? Mi maradt meg a r√©gi birtokrendszerb≈ël?", 
                answer: {
                    short: "Kb. 300.000 paraszt kapott 5-10 hold f√∂ldet, de a nagybirtokrendszer tov√°bbra is fennmaradt.",
                    explanation: "A f√∂ldreform keret√©ben k√∂r√ºlbel√ºl 300 ezer paraszt jutott kisebb, 5-10 holdas f√∂ldter√ºlethez. Azonban sokan tov√°bbra is f√∂ldn√©lk√ºliek maradtak, √©s a nagybirtokok rendszere nem v√°ltozott meg l√©nyegesen.",
                    simple: "Sok kis darab f√∂ldet osztottak ki, de a gazdagok nagy f√∂ldjei megmaradtak."
                }
            },
            { 
                section: "I. Teleki P√°l minisztereln√∂ks√©ge", 
                question: "Milyen eszk√∂z√∂kkel l√©pett fel Teleki korm√°nya a sz√©ls≈ës√©ges p√°rtok (pl. kommunist√°k) ellen?", 
                answer: {
                    short: "Betilt√°ssal, beb√∂rt√∂nz√©ssel, √©s ak√°r kiv√©gz√©ssel is.",
                    explanation: "A Teleki-korm√°ny kem√©nyen fell√©pett a sz√©ls≈ës√©ges politikai csoportokkal, k√ºl√∂n√∂sen a kommunist√°kkal szemben. Int√©zked√©seik k√∂z√© tartozott a p√°rtok betilt√°sa, tagjaik beb√∂rt√∂nz√©se, √©s s√∫lyosabb esetekben kiv√©gz√©sek is el≈ëfordultak.",
                    simple: "Aki nagyon sz√©ls≈ës√©ges volt, azt Teleki√©k kem√©nyen b√ºntett√©k: betiltott√°k, b√∂rt√∂nbe z√°rt√°k, vagy m√©g rosszabb."
                }
            },
            { 
                section: "I. Teleki P√°l minisztereln√∂ks√©ge", 
                question: "Mit jelentett a ‚Äûnumerus clausus‚Äù az egyetemi felv√©telekn√©l?", 
                answer: {
                    short: "Az egyetemeken a ‚Äûn√©pfajok‚Äù √©s nemzetis√©gek felv√©tel√©t az orsz√°gos ar√°nyukhoz k√∂t√∂tt√©k, korl√°tozva ezzel els≈ësorban a zsid√≥ hallgat√≥k sz√°m√°t.",
                    explanation: "A numerus clausus (z√°rt sz√°m) t√∂rv√©ny √©rtelm√©ben az egyetemekre felvehet≈ë hallgat√≥k sz√°m√°t az egyes ‚Äûn√©pfajokhoz‚Äù (ez a gyakorlatban els≈ësorban a zsid√≥s√°got √©rintette) √©s nemzetis√©gekhez tartoz√≥k eset√©ben az orsz√°gos n√©pess√©gar√°nyukhoz igaz√≠tott√°k.",
                    simple: "Korl√°tozt√°k, hogy pl. h√°ny zsid√≥ di√°k mehet egyetemre, hogy t√∂bb hely maradjon m√°soknak."
                }
            },
            { 
                section: "I. Teleki P√°l minisztereln√∂ks√©ge", 
                question: "Milyen folyamatot √≠r le az ‚Äû≈ërs√©gv√°lt√°s‚Äù kifejez√©s a numerus clausus kapcs√°n?", 
                answer: {
                    short: "A zsid√≥ √©rtelmis√©g hely√©nek √°tv√©tel√©t kereszt√©ny, nemzeti √©rtelmis√©giek √°ltal.",
                    explanation: "Az ‚Äû≈ërs√©gv√°lt√°s‚Äù fogalma arra a t√∂rekv√©sre utalt, hogy a numerus clausus √©s m√°s int√©zked√©sek r√©v√©n a kor√°bban jelent≈ës sz√°m√∫ zsid√≥ √©rtelmis√©get h√°tt√©rbe szor√≠ts√°k, √©s hely√ºket kereszt√©ny, nemzeti elk√∂telez≈ëd√©s≈± √©rtelmis√©giek vegy√©k √°t.",
                    simple: "A zsid√≥ √©rtelmis√©g helyett kereszt√©ny, magyar √©rtelmis√©get akartak l√°tni fontos poz√≠ci√≥kban."
                }
            },
            { 
                section: "I. Teleki P√°l minisztereln√∂ks√©ge", 
                question: "Mikor volt az I. kir√°lypuccs, ki pr√≥b√°lta visszaszerezni a tr√≥nt, √©s mi lett ennek a k√∂vetkezm√©nye Teleki P√°lra n√©zve?", 
                answer: {
                    short: "1921. m√°rcius-√°prilis√°ban IV. K√°roly sikertelen√ºl pr√≥b√°lta visszaszerezni a tr√≥nt, ami ut√°n Teleki P√°l lemondott.",
                    explanation: "1921 m√°rcius√°ban √©s √°prilis√°ban IV. K√°roly, az utols√≥ Habsburg uralkod√≥, sikertelen k√≠s√©rletet tett a magyar tr√≥n visszaszerz√©s√©re. Ez az esem√©ny, az I. kir√°lypuccs, v√©g√ºl Teleki P√°l minisztereln√∂k lemond√°s√°hoz vezetett.",
                    simple: "IV. K√°roly kir√°ly vissza akart j√∂nni uralkodni 1921-ben, de nem siker√ºlt neki. Teleki emiatt lemondott."
                }
            },
            // Folytasd az √∂sszes t√∂bbi k√©rd√©ssel ugyan√≠gy...
            // P√©ld√°ul a Bethlen-korszakb√≥l:
            { 
                section: "II. Bethlen Istv√°n konszolid√°ci√≥s politik√°ja", 
                question: "Mit jelent a 'konszolid√°ci√≥' Bethlen Istv√°n politik√°j√°ban?", 
                answer: {
                    short: "A t√°rsadalmi, gazdas√°gi √©s politikai helyzet stabiliz√°l√°s√°t, a nyugalom megteremt√©s√©t egy v√°ls√°gos id≈ëszak ut√°n.",
                    explanation: "A bethleni konszolid√°ci√≥ c√©lja az volt, hogy a h√°bor√∫, forradalmak √©s Trianon ut√°ni bizonytalan, ingatag helyzetet megszil√°rd√≠tsa, √©s nyugalmat, stabilit√°st teremtsen az orsz√°gban.",
                    simple: "Bethlen rendet akart tenni a nagy k√°osz ut√°n, hogy az orsz√°g megnyugodjon √©s fejl≈ëdni tudjon."
                }
            },
            {
                section: "IV. Bethlen k√ºlpolitik√°ja",
                question: "Melyik orsz√°ggal k√∂t√∂tt Magyarorsz√°g √∂r√∂kbar√°ts√°gi szerz≈ëd√©st 1927-ben?",
                answer: {
                    short: "Olaszorsz√°ggal.",
                    explanation: "1927-ben Magyarorsz√°g √©s Olaszorsz√°g k√∂z√∂tt √∂r√∂kbar√°ts√°gi szerz≈ëd√©s j√∂tt l√©tre. Ez fontos l√©p√©s volt Magyarorsz√°g k√ºlpolitikai elszigetelts√©g√©nek enyh√≠t√©s√©re.",
                    simple: "Bethlen Olaszorsz√°ggal bar√°tkozott, hogy legyenek sz√∂vets√©geseink."
                }
            }
        ];
        // FONTOS: T√∂ltsd fel az `allQuizQuestions` t√∂mb√∂t az √∂sszes di√°dr√≥l sz√°rmaz√≥ k√©rd√©ssel,
        // √©s mindegyikhez add meg a `short`, `explanation` √©s `simple` magyar√°zatokat!

        let shuffledQuizQuestions = [];
        let currentQuizQuestionIndex = -1;
        let quizStartTime = 0;
        let quizTimerInterval = null;
        let quizScore = 0;
        let quizActive = false;

        const quizSectionTitleDisplay = document.getElementById('quiz-section-title-display');
        const quizQuestionDisplay = document.getElementById('question-display');
        const quizAnswerDisplayContainer = document.getElementById('answer-display-container');
        const quizAnswerDisplay = document.getElementById('answer-display');
        const quizExplanationDisplay = document.getElementById('explanation-display');
        const simpleExplanationDisplay = document.getElementById('simple-explanation-display');
        const quizProgressInfo = document.getElementById('progress-info');
        const quizShowAnswerBtn = document.getElementById('show-answer-btn');
        const quizNextQuestionBtn = document.getElementById('next-question-btn');
        const quizTimerDisplay = document.getElementById('quiz-timer-display');
        const quizScoreDisplay = document.getElementById('quiz-score-display');
        const quizMedalDisplay = document.getElementById('quiz-medal-display');
        const resetQuizBtn = document.getElementById('reset-quiz-btn');

        function startQuizTimer() { /* ... (marad) ... */ }
        function stopQuizTimer() { /* ... (marad) ... */ }

        function calculateQuizMedal(elapsedSeconds) {
            const totalQuestions = shuffledQuizQuestions.length;
            quizScore = currentQuizQuestionIndex + 1; 
            quizScoreDisplay.textContent = quizScore;

            let medal = "üèÖ"; // Alap med√°l
            const timePerQuestion = totalQuestions > 0 ? elapsedSeconds / totalQuestions : Infinity;

            if (timePerQuestion <= 25) medal = "ü•á Arany"; 
            else if (timePerQuestion <= 45) medal = "ü•à Ez√ºst"; 
            else medal = "ü•â Bronz"; 
            
            quizMedalDisplay.textContent = medal;
        }
        
        function resetQuiz() {
            stopQuizTimer();
            quizActive = false;
            currentQuizQuestionIndex = -1;
            quizScore = 0;
            quizTimerDisplay.textContent = "00:00";
            quizScoreDisplay.textContent = "0";
            quizMedalDisplay.textContent = "üèÖ";
            quizProgressInfo.textContent = "0/0";
            quizQuestionDisplay.textContent = "Kattints a \"Start / K√∂vetkez≈ë k√©rd√©s\" gombra!";
            quizSectionTitleDisplay.textContent = "T√©mak√∂r";
            quizAnswerDisplayContainer.style.display = "none";
            quizShowAnswerBtn.disabled = true;
            quizNextQuestionBtn.textContent = "Start / K√∂vetkez≈ë k√©rd√©s";
            quizNextQuestionBtn.disabled = false;
            resetQuizBtn.style.display = "none";
            loadQuiz();
        }

        function loadQuiz() {
            shuffledQuizQuestions = [...allQuizQuestions];
            shuffleArray(shuffledQuizQuestions);
            quizProgressInfo.textContent = `0/${shuffledQuizQuestions.length}`;
            if (shuffledQuizQuestions.length === 0) {
                quizQuestionDisplay.textContent = "Nincsenek k√©rd√©sek a kv√≠zhez.";
                quizNextQuestionBtn.disabled = true;
            } else {
                quizNextQuestionBtn.disabled = false;
            }
        }

        function displayCurrentQuizQuestion() {
            if (currentQuizQuestionIndex < shuffledQuizQuestions.length) {
                const q = shuffledQuizQuestions[currentQuizQuestionIndex];
                quizSectionTitleDisplay.textContent = q.section;
                quizQuestionDisplay.textContent = q.question;
                quizAnswerDisplay.textContent = q.answer.short;
                quizExplanationDisplay.textContent = q.answer.explanation;
                simpleExplanationDisplay.textContent = q.answer.simple;
                quizAnswerDisplayContainer.style.display = 'none';
                quizShowAnswerBtn.disabled = false;
                quizNextQuestionBtn.disabled = false;
                quizProgressInfo.textContent = `${currentQuizQuestionIndex + 1}/${shuffledQuizQuestions.length}`;
                quizNextQuestionBtn.textContent = "K√∂vetkez≈ë k√©rd√©s";
            }
        }
        
        function nextQuizQuestion() {
            if (!quizActive) {
                if (shuffledQuizQuestions.length === 0) return;
                quizActive = true;
                startQuizTimer();
                resetQuizBtn.style.display = "inline-block"; // V√°ltoztat√°s: inline-block
                quizNextQuestionBtn.textContent = "K√∂vetkez≈ë k√©rd√©s";
            }

            currentQuizQuestionIndex++;
            if (currentQuizQuestionIndex < shuffledQuizQuestions.length) {
                displayCurrentQuizQuestion();
            } else {
                stopQuizTimer();
                const elapsedTime = quizStartTime > 0 ? Math.floor((Date.now() - quizStartTime) / 1000) : 0;
                quizQuestionDisplay.textContent = "A kv√≠z v√©g√©re √©rt√©l!";
                quizSectionTitleDisplay.textContent = "Kv√≠z befejezve";
                quizAnswerDisplayContainer.style.display = 'none';
                quizShowAnswerBtn.disabled = true;
                quizNextQuestionBtn.disabled = true;
                quizNextQuestionBtn.textContent = "V√©ge";
                calculateQuizMedal(elapsedTime);
            }
        }

        function showQuizAnswer() {
            if (currentQuizQuestionIndex >= 0 && currentQuizQuestionIndex < shuffledQuizQuestions.length) {
                quizAnswerDisplayContainer.style.display = 'block';
            }
        }
        
        // --- Id≈ërend Gyakorl√≥ J√°t√©k Logika ---
        const timelineEvents = [ // Most m√°r itt van a t√∂mb!
            { text: "Teleki P√°l minisztereln√∂ks√©g√©nek kezdete", year: 1920, month: 7, sortKey: 1920.07 },
            { text: "A Numerus Clausus t√∂rv√©ny bevezet√©se", year: 1920, month: 9, sortKey: 1920.09 }, 
            { text: "Az I. kir√°lypuccs (IV. K√°roly k√≠s√©rlete)", year: 1921, month: 3, sortKey: 1921.03 }, 
            { text: "Teleki P√°l lemond√°sa", year: 1921, month: 4, sortKey: 1921.04 },
            { text: "Bethlen Istv√°n minisztereln√∂ks√©g√©nek kezdete", year: 1921, month: 4, sortKey: 1921.041 }, 
            { text: "A Bethlen-Peyer paktum megk√∂t√©se", year: 1921, month: 12, sortKey: 1921.12 }, 
            { text: "A II. kir√°lypuccs (buda√∂rsi csata)", year: 1921, month: 10, sortKey: 1921.10 },
            { text: "A Habsburg-h√°z tr√≥nfoszt√°sa (detroniz√°ci√≥)", year: 1921, month: 11, sortKey: 1921.11 },
            { text: "Magyarorsz√°g bel√©p√©se a N√©psz√∂vets√©gbe", year: 1922, month: 9, sortKey: 1922.09 }, 
            { text: "Az √∫j v√°laszt√≥jogi t√∂rv√©ny bevezet√©se (Bethlen)", year: 1922, month: 3, sortKey: 1922.03 }, 
            { text: "A Magyar Nemzeti Bank l√©trehoz√°sa", year: 1924, month: 6, sortKey: 1924.06 }, 
            { text: "Az √∫j p√©nznem, a peng≈ë bevezet√©se", year: 1927, month: 1, sortKey: 1927.01 }, 
            { text: "Az olasz-magyar √∂r√∂kbar√°ts√°gi szerz≈ëd√©s megk√∂t√©se", year: 1927, month: 4, sortKey: 1927.04 }
        ];

        let currentEventPair = [];
        let timelineAttempts = 0;
        let timelineCorrectAnswers = 0;
        let totalTimelineResponseTime = 0;
        let currentPairStartTime = 0;

        const eventABtn = document.getElementById('eventA-btn');
        const eventBBtn = document.getElementById('eventB-btn');
        const timelineFeedback = document.getElementById('timeline-feedback');
        const nextPairBtn = document.getElementById('next-pair-btn');
        const timelineAttemptsDisplay = document.getElementById('timeline-attempts-display');
        const timelineCorrectDisplay = document.getElementById('timeline-correct-display');
        const timelineAccuracyDisplay = document.getElementById('timeline-accuracy-display');
        const timelineAvgTimeDisplay = document.getElementById('timeline-avg-time-display');
        const timelineMedalDisplay = document.getElementById('timeline-medal-display');

        function updateTimelineStats() {
            timelineAttemptsDisplay.textContent = timelineAttempts;
            timelineCorrectDisplay.textContent = timelineCorrectAnswers;
            const accuracy = timelineAttempts > 0 ? ((timelineCorrectAnswers / timelineAttempts) * 100).toFixed(0) : 0;
            timelineAccuracyDisplay.textContent = accuracy;
            const avgTime = timelineAttempts > 0 ? (totalTimelineResponseTime / timelineAttempts / 1000).toFixed(1) : "N/A";
            timelineAvgTimeDisplay.textContent = avgTime;

            let medal = "‚è≥"; // Alap med√°l
            if (timelineAttempts >= 5) { 
                const accuracyRate = parseFloat(accuracy);
                const avgResponseSec = parseFloat(avgTime);

                if (accuracyRate >= 90 && avgResponseSec <= 8) medal = "ü•á Arany";
                else if (accuracyRate >= 75 && avgResponseSec <= 12) medal = "ü•à Ez√ºst";
                else if (accuracyRate >= 50) medal = "ü•â Bronz";
                else medal = "üìñ Gyakorolj m√©g!";
            }
            timelineMedalDisplay.textContent = medal;
        }
        
        function resetTimelineGame() {
            timelineAttempts = 0;
            timelineCorrectAnswers = 0;
            totalTimelineResponseTime = 0;
            updateTimelineStats();
            timelineMedalDisplay.textContent = "‚è≥";
            loadNewEventPair();
        }

        function loadNewEventPair() {
             if (timelineEvents.length < 2) {
                timelineFeedback.textContent = "Nincs el√©g esem√©ny a j√°t√©khoz.";
                eventABtn.style.display = "none";
                eventBBtn.style.display = "none";
                nextPairBtn.disabled = true;
                return;
            }
            eventABtn.style.display = "block";
            eventBBtn.style.display = "block";

            let indexA = Math.floor(Math.random() * timelineEvents.length);
            let indexB = Math.floor(Math.random() * timelineEvents.length);
            while (indexB === indexA) { // Biztos√≠tjuk, hogy ne ugyanaz legyen a k√©t esem√©ny
                indexB = Math.floor(Math.random() * timelineEvents.length);
            }
            // V√©letlenszer≈±en cser√©lj√ºk fel ≈ëket n√©ha
            currentEventPair = Math.random() < 0.5 ? [timelineEvents[indexA], timelineEvents[indexB]] : [timelineEvents[indexB], timelineEvents[indexA]];
            
            eventABtn.textContent = currentEventPair[0].text;
            eventBBtn.textContent = currentEventPair[1].text;

            eventABtn.classList.remove('correct', 'incorrect');
            eventBBtn.classList.remove('correct', 'incorrect');
            eventABtn.disabled = false;
            eventBBtn.disabled = false;
            timelineFeedback.textContent = "V√°rom a v√°laszod...";
            nextPairBtn.disabled = true; 
            currentPairStartTime = Date.now();
        }

        function checkTimelineOrder(selectedIndex) { 
            const responseTime = Date.now() - currentPairStartTime;
            totalTimelineResponseTime += responseTime;
            timelineAttempts++;

            const chosenEvent = currentEventPair[selectedIndex];
            // A helyes kor√°bbi esem√©ny meghat√°roz√°sa a sortKey alapj√°n
            const actualEarlierEvent = currentEventPair[0].sortKey < currentEventPair[1].sortKey ? currentEventPair[0] : currentEventPair[1];

            eventABtn.disabled = true;
            eventBBtn.disabled = true;
            nextPairBtn.disabled = false;

            if (chosenEvent.sortKey === actualEarlierEvent.sortKey) {
                timelineFeedback.textContent = `Helyes! (${(responseTime/1000).toFixed(1)} mp)`;
                timelineFeedback.style.color = "#28a745"; 
                if (selectedIndex === 0) eventABtn.classList.add('correct');
                else eventBBtn.classList.add('correct');
                timelineCorrectAnswers++;
            } else {
                timelineFeedback.textContent = `Helytelen. A kor√°bbi: ${actualEarlierEvent.text} (${(responseTime/1000).toFixed(1)} mp)`;
                timelineFeedback.style.color = "#dc3545";
                if (selectedIndex === 0) eventABtn.classList.add('incorrect');
                else eventBBtn.classList.add('incorrect');
                // Mutasd a helyeset is
                if(currentEventPair[0].sortKey === actualEarlierEvent.sortKey) eventABtn.classList.add('correct');
                else eventBBtn.classList.add('correct');
            }
            updateTimelineStats();
        }
        
        window.onload = () => {
            loadQuiz();
            loadNewEventPair();
            updateTimelineStats();
        };
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Faszom Gyakorlat</title> {/* CÍM MÓDOSÍTVA */}
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #333; 
            color: #e0e0e0; 
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }
        .game-section {
            background-color: #444; 
            padding: 25px 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            width: 90%;
            max-width: 800px;
            margin-top: 20px;
            margin-bottom: 20px;
            border: 1px solid #555;
        }
        h1, h2 {
            color: #00A8E8; 
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 1px 1px 1px #000;
        }
        h1 { font-size: 2em; }
        h2 { font-size: 1.6em; margin-top: 25px; border-bottom: 1px solid #00A8E8; padding-bottom: 10px;}

        /* Kvíz specifikus */
        .question-area { margin-bottom: 20px; }
        .question-section-title {
            font-size: 0.9em; color: #bbb; margin-bottom: 8px;
            font-weight: bold; border-left: 3px solid #00A8E8; padding-left: 10px;
        }
        .question-text { font-size: 1.15em; margin-bottom: 15px; line-height: 1.6; color: #F1C40F; }
        .answer-container {
            margin-top: 15px; padding: 15px; background-color: #3d3d3d; 
            border: 1px solid #555; border-radius: 6px; display: none;
        }
        .answer-title, .explanation-title, .simple-explanation-title { 
            font-weight: bold; display: block; margin-bottom: 5px; 
            font-size: 1.05em;
        }
        .answer-title { color: #2ECC71; }
        .explanation-title { color: #3498DB; }
        .simple-explanation-title { color: #E67E22; }

        .answer-text, .explanation-text, .simple-explanation-text { 
            margin-bottom: 10px; line-height: 1.5;
            font-size: 1em; color: #ccc;
        }
        .simple-explanation-text { font-style: italic;} 
        
        /* Időrend játék specifikus */
        .event-options { display: none; } 
        .event-options button {
            display: block; width: 100%; padding: 12px; margin-bottom: 10px;
            border: 1px solid #00A8E8; 
            background-color: #555; 
            color: #e0e0e0; cursor: pointer; border-radius: 5px;
            text-align: left; font-size: 1em; transition: background-color 0.2s;
        }
        .event-options button:hover { background-color: #666; border-color: #F1C40F;}
        .event-options button.correct { background-color: #27AE60; border-color: #2ECC71; color: white; } 
        .event-options button.incorrect { background-color: #C0392B; border-color: #E74C3C; color: white; } 
        #timeline-feedback { margin-top: 15px; font-weight: bold; text-align: center; font-size: 1.05em; min-height: 1.4em; color: #ccc;}
        
        .button-container { display: flex; justify-content: space-around; margin-top: 25px; }
        button {
            padding: 10px 20px; border: none; border-radius: 5px; 
            background-color: #00A8E8; 
            color: #fff; cursor: pointer; font-size: 1em;
            transition: background-color 0.2s;
        }
        button:hover { background-color: #0077B3; }
        button:disabled { background: #6c757d; color: #aaa; cursor: not-allowed; }
        
        .stats-display { /* Ez most csak az időrend játékhoz kell */
            margin-top: 20px; padding: 15px; background-color: #3a3a3a; 
            border-radius: 6px; border: 1px solid #505050; 
            text-align: center;
        }
        .stats-display p { margin: 6px 0; font-size: 1em; color: #ccc;}
        .stats-display .label { color: #00A8E8; font-weight: bold;}
        .stats-display .medal { font-size: 2.2em; margin-top: 5px; } /* Időrend játékhoz medál maradhat */
         #quiz-progress-container { /* Kvíz haladásának külön konténer */
            margin-top: 15px; text-align: center; font-size: 0.9em; color: #bbb;
        }
    </style>
</head>
<body>
    <h1>Faszom Gyakorlat</h1> {/* CÍM MÓDOSÍTVA */}
    <p style="text-align:center; font-size:1em; color:#ccc;">Na, nézzük, mit tudsz!</p>

    <div class="game-section" id="quiz-section-container">
        <h2>Kvíz - Gyakorlás</h2>
        <p style="text-align: center; font-size: 0.9em; color: #aaa; margin-bottom: 20px;">Menj végig a kérdéseken, és ellenőrizd a tudásod.</p>
        
        <div class="question-area">
            <div id="quiz-section-title-display" class="question-section-title">Témakör</div>
            <div id="question-display" class="question-text">Kattints a "Start / Következő kérdés" gombra!</div>
            <div id="answer-display-container" class="answer-container">
                <strong class="answer-title">Helyes válasz:</strong>
                <div id="answer-display" class="answer-text"></div>
                <strong class="explanation-title">Magyarázat:</strong>
                <div id="explanation-display" class="explanation-text"></div>
                <strong class="simple-explanation-title">Egyszerűen:</strong>
                <div id="simple-explanation-display" class="simple-explanation-text"></div>
            </div>
        </div>

        <div class="button-container">
            <button id="show-answer-btn" onclick="showQuizAnswer()" disabled>Válasz mutatása</button>
            <button id="next-question-btn" onclick="nextQuizQuestion()">Start / Következő kérdés</button>
        </div>
        <div id="quiz-progress-container"> {/* Külön konténer a haladásnak */}
            <p><span id="progress-info">0/0</span></p>
            <button id="reset-quiz-btn" onclick="resetQuiz()" style="display:none; margin-top:10px;">Újra</button>
        </div>
    </div>

    <div class="game-section" id="timeline-section-container">
        <h2>Időrend Gyakorló</h2>
        <div id="timeline-start-screen">
            <p style="text-align: center; font-size: 0.9em; color: #aaa; margin-bottom: 15px;">Készen állsz? Indulhat az időrendi harc!</p>
            <div class="button-container" style="justify-content: center;">
                <button id="start-timeline-game-btn" onclick="startTimelineGame()">Start Időrend</button>
            </div>
        </div>

        <div id="timeline-game-content" style="display:none;">
            <p style="text-align: center; font-size: 0.9em; color: #aaa; margin-bottom: 15px;">Melyik esemény történt korábban?</p>
            <div id="event-pair-display">
                <p style="text-align:center; font-weight:bold; font-size:1.1em; color: #E74C3C;">Melyik volt előbb?</p>
                <div class="event-options">
                    <button id="eventA-btn" onclick="checkTimelineOrder(0)">Esemény A</button>
                    <button id="eventB-btn" onclick="checkTimelineOrder(1)">Esemény B</button>
                </div>
            </div>
            <div id="timeline-feedback">Várom a válaszod...</div>
            <div class="button-container" style="justify-content: center;">
                <button id="next-pair-btn" onclick="loadNewEventPair()">Következő pár</button>
            </div>
        </div>
         <div class="stats-display" id="timeline-stats" style="margin-top: 20px;"> 
            <p><span class="label">Próbálkozások:</span> <span id="timeline-attempts-display">0</span></p>
            <p><span class="label">Helyes válaszok:</span> <span id="timeline-correct-display">0</span> (<span id="timeline-accuracy-display">0</span>%)</p>
            <p><span class="label">Átlagos válaszidő:</span> <span id="timeline-avg-time-display">N/A</span> mp</p>
            <p class="medal" id="timeline-medal-display">⏳</p> {/* Időrend játékhoz a medál maradhat, ha szeretnéd, vagy ezt is kiveheted */}
            <button id="reset-timeline-btn" onclick="resetTimelineGame()" style="margin-top:10px;">Újra</button>
        </div>
    </div>

    <script>
        // --- Általános segédfüggvények ---
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // --- Részletes Kvíz Logika ---
        const allQuizQuestions = [
            // FONTOS: Ide másold be az összes kérdésedet a `short`, `explanation`, `simple` mezőkkel!
            // Csak pár példát hagyok itt a struktúra miatt:
            { 
                section: "I. Teleki Pál miniszterelnöksége", 
                question: "Mikor volt Teleki Pál első miniszterelnöksége?", 
                answer: {
                    short: "1920. július – 1921. április.",
                    explanation: "Teleki Pál első miniszterelnöki időszaka 1920 júliusától 1921 áprilisáig tartott, a Tanácsköztársaság bukása és a trianoni békeszerződés utáni nehéz időkben.",
                    simple: "Teleki 1920-21 körül volt először a főnök, amikor nagy volt a káosz az országban."
                }
            },
             { 
                section: "I. Teleki Pál miniszterelnöksége", 
                question: "Ki volt a földművelési miniszter Teleki kormányában, aki a földreformot kidolgozta?", 
                answer: {
                    short: "Nagyatádi Szabó István.",
                    explanation: "Nagyatádi Szabó István, a Kisgazdapárt vezető politikusa volt a földművelési miniszter, és ő felelt a Teleki-kormány földreformjának előkészítéséért.",
                    simple: "Nagyatádi Szabó István próbált földet adni a parasztoknak Teleki idején."
                }
            },
            { 
                section: "II. Bethlen István konszolidációs politikája", 
                question: "Mit jelent a 'konszolidáció' Bethlen István politikájában?", 
                answer: {
                    short: "A társadalmi, gazdasági és politikai helyzet stabilizálását, a nyugalom megteremtését egy válságos időszak után.",
                    explanation: "A bethleni konszolidáció célja az volt, hogy a háború, forradalmak és Trianon utáni bizonytalan, ingatag helyzetet megszilárdítsa, és nyugalmat, stabilitást teremtsen az országban.",
                    simple: "Bethlen rendet akart tenni a nagy káosz után, hogy az ország megnyugodjon és fejlődni tudjon."
                }
            },
        ];

        let shuffledQuizQuestions = [];
        let currentQuizQuestionIndex = -1;
        let quizActive = false; // Csak azt jelzi, elindult-e már a kvíz

        const quizSectionTitleDisplay = document.getElementById('quiz-section-title-display');
        const quizQuestionDisplay = document.getElementById('question-display');
        const quizAnswerDisplayContainer = document.getElementById('answer-display-container');
        const quizAnswerDisplay = document.getElementById('answer-display');
        const quizExplanationDisplay = document.getElementById('explanation-display');
        const simpleExplanationDisplay = document.getElementById('simple-explanation-display');
        const quizProgressInfo = document.getElementById('progress-info');
        const quizShowAnswerBtn = document.getElementById('show-answer-btn');
        const quizNextQuestionBtn = document.getElementById('next-question-btn');
        const resetQuizBtn = document.getElementById('reset-quiz-btn');
        
        function resetQuiz() {
            quizActive = false;
            currentQuizQuestionIndex = -1;
            quizProgressInfo.textContent = `0/${shuffledQuizQuestions.length}`;
            quizQuestionDisplay.textContent = "Kattints a \"Start / Következő kérdés\" gombra!";
            quizSectionTitleDisplay.textContent = "Témakör";
            quizAnswerDisplayContainer.style.display = "none";
            quizShowAnswerBtn.disabled = true;
            quizNextQuestionBtn.textContent = "Start / Következő kérdés";
            quizNextQuestionBtn.disabled = false;
            resetQuizBtn.style.display = "none";
            loadQuiz(); // Újrakeveri a kérdéseket, ha szükséges
        }

        function loadQuiz() {
            shuffledQuizQuestions = [...allQuizQuestions];
            shuffleArray(shuffledQuizQuestions);
            quizProgressInfo.textContent = `0/${shuffledQuizQuestions.length}`; // Frissítés itt is
            if (shuffledQuizQuestions.length === 0) {
                quizQuestionDisplay.textContent = "Nincsenek kérdések a kvízhez.";
                quizNextQuestionBtn.disabled = true;
            } else {
                quizNextQuestionBtn.disabled = false;
            }
        }

        function displayCurrentQuizQuestion() {
            if (currentQuizQuestionIndex < shuffledQuizQuestions.length) {
                const q = shuffledQuizQuestions[currentQuizQuestionIndex];
                quizSectionTitleDisplay.textContent = q.section;
                quizQuestionDisplay.textContent = q.question;
                quizAnswerDisplay.textContent = q.answer.short;
                quizExplanationDisplay.textContent = q.answer.explanation;
                simpleExplanationDisplay.textContent = q.answer.simple;
                quizAnswerDisplayContainer.style.display = 'none';
                quizShowAnswerBtn.disabled = false;
                quizProgressInfo.textContent = `${currentQuizQuestionIndex + 1}/${shuffledQuizQuestions.length}`;
            }
        }
        
        function nextQuizQuestion() {
            if (!quizActive) {
                if (shuffledQuizQuestions.length === 0) return;
                quizActive = true;
                resetQuizBtn.style.display = "inline-block";
            }

            currentQuizQuestionIndex++;
            if (currentQuizQuestionIndex < shuffledQuizQuestions.length) {
                quizNextQuestionBtn.textContent = "Következő kérdés";
                displayCurrentQuizQuestion();
            } else {
                quizQuestionDisplay.textContent = "A kvíz végére értél! Nyomd meg az 'Újra' gombot, ha folytatnád.";
                quizSectionTitleDisplay.textContent = "Kvíz befejezve";
                quizAnswerDisplayContainer.style.display = 'none';
                quizShowAnswerBtn.disabled = true;
                quizNextQuestionBtn.disabled = true;
                quizNextQuestionBtn.textContent = "Vége";
            }
        }

        function showQuizAnswer() {
            if (quizActive && currentQuizQuestionIndex >= 0 && currentQuizQuestionIndex < shuffledQuizQuestions.length) {
                quizAnswerDisplayContainer.style.display = 'block';
            }
        }
        
        // --- Időrend Gyakorló Játék Logika ---
        const timelineEvents = [ 
            { text: "Teleki Pál miniszterelnökségének kezdete", year: 1920, month: 7, sortKey: 1920.07 },
            { text: "A Numerus Clausus törvény bevezetése", year: 1920, month: 9, sortKey: 1920.09 }, 
            { text: "Az I. királypuccs (IV. Károly kísérlete)", year: 1921, month: 3, sortKey: 1921.03 }, 
            { text: "Teleki Pál lemondása", year: 1921, month: 4, sortKey: 1921.04 },
            { text: "Bethlen István miniszterelnökségének kezdete", year: 1921, month: 4, sortKey: 1921.041 }, 
            { text: "A Bethlen-Peyer paktum megkötése", year: 1921, month: 12, sortKey: 1921.12 }, 
            { text: "A II. királypuccs (budaörsi csata)", year: 1921, month: 10, sortKey: 1921.10 },
            { text: "A Habsburg-ház trónfosztása (detronizáció)", year: 1921, month: 11, sortKey: 1921.11 },
            { text: "Magyarország belépése a Népszövetségbe", year: 1922, month: 9, sortKey: 1922.09 }, 
            { text: "Az új választójogi törvény bevezetése (Bethlen)", year: 1922, month: 3, sortKey: 1922.03 }, 
            { text: "A Magyar Nemzeti Bank létrehozása", year: 1924, month: 6, sortKey: 1924.06 }, 
            { text: "Az új pénznem, a pengő bevezetése", year: 1927, month: 1, sortKey: 1927.01 }, 
            { text: "Az olasz-magyar örökbarátsági szerződés megkötése", year: 1927, month: 4, sortKey: 1927.04 }
        ];

        let currentEventPair = [];
        let timelineAttempts = 0;
        let timelineCorrectAnswers = 0;
        let totalTimelineResponseTime = 0;
        let currentPairStartTime = 0;
        let timelineGameActive = false;

        const timelineStartScreen = document.getElementById('timeline-start-screen');
        const timelineGameContent = document.getElementById('timeline-game-content');
        const eventABtn = document.getElementById('eventA-btn');
        const eventBBtn = document.getElementById('eventB-btn');
        const timelineFeedback = document.getElementById('timeline-feedback');
        const nextPairBtn = document.getElementById('next-pair-btn');
        const timelineAttemptsDisplay = document.getElementById('timeline-attempts-display');
        const timelineCorrectDisplay = document.getElementById('timeline-correct-display');
        const timelineAccuracyDisplay = document.getElementById('timeline-accuracy-display');
        const timelineAvgTimeDisplay = document.getElementById('timeline-avg-time-display');
        const timelineMedalDisplay = document.getElementById('timeline-medal-display');
        const resetTimelineBtn = document.getElementById('reset-timeline-btn');


        function startTimelineGame() {
            timelineStartScreen.style.display = 'none';
            timelineGameContent.style.display = 'block';
            document.querySelector('.event-options').style.display = 'block'; // Gombok megjelenítése
            resetTimelineBtn.style.display = 'inline-block'; 
            timelineGameActive = true;
            resetTimelineGameStats(); 
            loadNewEventPair();
        }
        
        function resetTimelineGameStats() { 
            timelineAttempts = 0;
            timelineCorrectAnswers = 0;
            totalTimelineResponseTime = 0;
            updateTimelineStats(); // Ez frissíti a kijelzőket nullára
            timelineMedalDisplay.textContent = "⏳"; // Alap medál visszaállítása
        }

        function updateTimelineStats() {
            timelineAttemptsDisplay.textContent = timelineAttempts;
            timelineCorrectDisplay.textContent = timelineCorrectAnswers;
            const accuracy = timelineAttempts > 0 ? ((timelineCorrectAnswers / timelineAttempts) * 100).toFixed(0) : 0;
            timelineAccuracyDisplay.textContent = accuracy;
            const avgTime = timelineCorrectAnswers > 0 ? (totalTimelineResponseTime / timelineCorrectAnswers / 1000).toFixed(1) : "N/A"; // Csak a helyes válaszok idejét átlagoljuk
            timelineAvgTimeDisplay.textContent = avgTime;

            let medal = "⏳"; 
            if (timelineAttempts >= 5) { 
                const accuracyRate = parseFloat(accuracy);
                const avgResponseSec = parseFloat(avgTime); // Ha N/A, akkor NaN lesz

                if (accuracyRate >= 90 && !isNaN(avgResponseSec) && avgResponseSec <= 8) medal = "🥇 Arany";
                else if (accuracyRate >= 75 && !isNaN(avgResponseSec) && avgResponseSec <= 12) medal = "🥈 Ezüst";
                else if (accuracyRate >= 50) medal = "🥉 Bronz";
                else medal = "📖 Gyakorolj!";
            }
            timelineMedalDisplay.textContent = medal;
        }
        
        function resetTimelineGame() {
            timelineStartScreen.style.display = 'block'; // Vissza a start képernyőre
            timelineGameContent.style.display = 'none';
            document.querySelector('.event-options').style.display = 'none';
            resetTimelineBtn.style.display = 'none';
            timelineGameActive = false;
            resetTimelineGameStats(); // Statisztikák nullázása a teljes újraindításkor
        }

        function loadNewEventPair() {
             if (!timelineGameActive) return; 

             if (timelineEvents.length < 2) {
                timelineFeedback.textContent = "Nincs elég esemény a játékhoz.";
                eventABtn.style.display = "none";
                eventBBtn.style.display = "none";
                nextPairBtn.disabled = true;
                return;
            }
            // Gombok láthatóvá tétele, ha esetleg el voltak rejtve
            eventABtn.style.display = "block";
            eventBBtn.style.display = "block";

            let indexA = Math.floor(Math.random() * timelineEvents.length);
            let indexB = Math.floor(Math.random() * timelineEvents.length);
            while (indexB === indexA) {
                indexB = Math.floor(Math.random() * timelineEvents.length);
            }
            currentEventPair = Math.random() < 0.5 ? [timelineEvents[indexA], timelineEvents[indexB]] : [timelineEvents[indexB], timelineEvents[indexA]];
            
            eventABtn.textContent = currentEventPair[0].text;
            eventBBtn.textContent = currentEventPair[1].text;

            eventABtn.classList.remove('correct', 'incorrect');
            eventBBtn.classList.remove('correct', 'incorrect');
            eventABtn.disabled = false;
            eventBBtn.disabled = false;
            timelineFeedback.textContent = "Várom a válaszod...";
            nextPairBtn.disabled = true; 
            currentPairStartTime = Date.now();
        }

        function checkTimelineOrder(selectedIndex) { 
            if (!timelineGameActive) return; 
            
            const responseTime = Date.now() - currentPairStartTime;
            timelineAttempts++; // Minden próbálkozást számolunk

            const chosenEvent = currentEventPair[selectedIndex];
            const actualEarlierEvent = currentEventPair[0].sortKey < currentEventPair[1].sortKey ? currentEventPair[0] : currentEventPair[1];

            eventABtn.disabled = true;
            eventBBtn.disabled = true;
            nextPairBtn.disabled = false;

            if (chosenEvent.sortKey === actualEarlierEvent.sortKey) {
                timelineFeedback.textContent = `Helyes! (${(responseTime/1000).toFixed(1)} mp)`;
                timelineFeedback.style.color = "#2ECC71"; 
                if (selectedIndex === 0) eventABtn.classList.add('correct');
                else eventBBtn.classList.add('correct');
                timelineCorrectAnswers++; // Csak a helyes válaszokat adjuk hozzá ehhez
                totalTimelineResponseTime += responseTime; // És csak a helyesek idejét az átlaghoz
            } else {
                timelineFeedback.textContent = `Helytelen. A korábbi: ${actualEarlierEvent.text} (${(responseTime/1000).toFixed(1)} mp)`;
                timelineFeedback.style.color = "#E74C3C";
                if (selectedIndex === 0) eventABtn.classList.add('incorrect');
                else eventBBtn.classList.add('incorrect');
                // A helyeset is kiemeljük
                if(currentEventPair[0].sortKey === actualEarlierEvent.sortKey) eventABtn.classList.add('correct');
                else eventBBtn.classList.add('correct');
            }
            updateTimelineStats();
        }
        
        window.onload = () => {
            loadQuiz();
            // Időrendi játék alaphelyzetbe állítása, de nem indítása
            timelineStartScreen.style.display = 'block';
            timelineGameContent.style.display = 'none';
            resetTimelineBtn.style.display = 'none';
            updateTimelineStats(); 
        };
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T√∂ri Teszt Deluxe: Teleki & Bethlen Edition</title>
    <style>
        body {
            font-family: 'Trebuchet MS', Helvetica, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #333; /* S√∂t√©tsz√ºrke h√°tt√©r */
            color: #e0e0e0; /* Vil√°gossz√ºrke sz√∂veg */
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }
        .game-section {
            background-color: #444; /* K√∂z√©psz√ºrke szekci√≥k */
            padding: 25px 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            width: 90%;
            max-width: 850px;
            margin-top: 25px;
            margin-bottom: 25px;
            border: 2px solid #555;
        }
        h1, h2 {
            color: #00A8E8; /* √âl√©nk k√©k c√≠mek */
            text-align: center;
            margin-bottom: 25px;
            text-shadow: 1px 1px 1px #000;
        }
        h1 { font-size: 2.2em; text-transform: uppercase; letter-spacing: 1px;}
        h2 { font-size: 1.8em; margin-top: 30px; border-bottom: 2px solid #00A8E8; padding-bottom: 10px;}

        /* Kv√≠z specifikus */
        .question-area { margin-bottom: 20px; }
        .question-section-title {
            font-size: 1em; color: #9B59B6; /* Lila */
            margin-bottom: 10px; font-weight: bold;
            border-left: 4px solid #9B59B6; padding-left: 12px;
        }
        .question-text { font-size: 1.2em; margin-bottom: 15px; line-height: 1.5; color: #F1C40F; /* S√°rga k√©rd√©s */ }
        .answer-container {
            margin-top: 15px; padding: 15px; background-color: #4F4F4F; /* S√∂t√©tebb sz√ºrke v√°lasz kont√©ner */
            border: 1px solid #666; border-radius: 8px; display: none;
        }
        .answer-title, .explanation-title, .simple-explanation-title { 
            font-weight: bold; display: block; margin-bottom: 5px; 
            font-size: 1.1em;
        }
        .answer-title { color: #2ECC71; /* Z√∂ld */}
        .explanation-title { color: #3498DB; /* K√©k */}
        .simple-explanation-title { color: #E67E22; /* Narancs */}

        .answer-text, .explanation-text, .simple-explanation-text { 
            margin-bottom: 12px; line-height: 1.6;
            font-size: 1em;
        }
        .answer-text { color: #9FE2BF; } /* Vil√°gosz√∂ld */
        .explanation-text { color: #A9CCE3; } /* Vil√°gosk√©k */
        .simple-explanation-text { color: #FAD7A0; font-style: italic;} /* Vil√°gos narancs */
        
        /* Id≈ërend j√°t√©k specifikus */
        .event-options button {
            display: block; width: 100%; padding: 14px; margin-bottom: 12px;
            border: 2px solid #00A8E8; 
            background-color: #555; 
            color: #e0e0e0; cursor: pointer; border-radius: 8px;
            text-align: left; font-size: 1.05em; transition: all 0.2s ease;
        }
        .event-options button:hover { background-color: #666; border-color: #F1C40F;}
        .event-options button.correct { background-color: #27AE60; border-color: #2ECC71; color: white; font-weight: bold; } 
        .event-options button.incorrect { background-color: #C0392B; border-color: #E74C3C; color: white; font-weight: bold; } 
        #timeline-feedback { margin-top: 15px; font-weight: bold; text-align: center; font-size: 1.1em; min-height: 1.5em;}
        
        .button-container { display: flex; justify-content: space-around; margin-top: 30px; }
        button {
            padding: 12px 25px; border: none; border-radius: 8px; 
            background-color: #00A8E8; 
            color: #fff; cursor: pointer; font-size: 1.1em;
            transition: all 0.3s ease; box-shadow: 0 2px 4px rgba(0,0,0,0.4);
            font-weight: bold; text-transform: uppercase;
        }
        button:hover { background-color: #0077B3; box-shadow: 0 4px 8px rgba(0,0,0,0.5); }
        button:disabled { background: #777; color: #aaa; cursor: not-allowed; box-shadow: none; }
        
        .stats-display {
            margin-top: 20px; padding: 15px; background-color: #3D3D3D; 
            border-radius: 8px; border: 2px dashed #F1C40F; 
            text-align: center;
        }
        .stats-display p { margin: 8px 0; font-size: 1.1em; color: #ccc;}
        .stats-display .label { color: #F1C40F; font-weight: bold;}
        .stats-display .medal { font-size: 2.8em; margin-top: 5px; }
    </style>
</head>
<body>
    <h1>T√∂ri Teszt Deluxe: Teleki & Bethlen Edition</h1>
    <p style="text-align:center; font-size:1.1em; color:#ccc;">Na, v√°gjunk bele, te kis agytr√∂szt! Nyomd sz√©t ezt a tesztet!</p>

    <div class="game-section" id="quiz-section-container">
        <h2>A Nagy Agy√©get≈ë Kv√≠z</h2>
        <p style="text-align: center; font-size: 0.95em; color: #bbb; margin-bottom: 20px;">P√∂rgesd v√©gig a k√©rd√©seket, azt√°n lesd meg a v√°laszokat, ha nem megy fejbol. A v√©g√©n megl√°tjuk, mekkora m√°jer vagy!</p>
        
        <div class="question-area">
            <div id="quiz-section-title-display" class="question-section-title">T√©mafelvezet≈ë cucc</div>
            <div id="question-display" class="question-text">Nyomj a "START / K√ñVI K√âRd√©s" gombra, ha mersz!</div>
            <div id="answer-display-container" class="answer-container">
                <strong class="answer-title">A tuti v√°lasz:</strong>
                <div id="answer-display" class="answer-text"></div>
                <strong class="explanation-title">Okosba' a magyar√°zat:</strong>
                <div id="explanation-display" class="explanation-text"></div>
                <strong class="simple-explanation-title">H√ºlyeBiztos Magyar√°zat (Pongyol√°n):</strong>
                <div id="simple-explanation-display" class="simple-explanation-text"></div>
            </div>
        </div>

        <div class="button-container">
            <button id="show-answer-btn" onclick="showQuizAnswer()" disabled>Mutasd a S√∫g√°st!</button>
            <button id="next-question-btn" onclick="nextQuizQuestion()">START / K√ñVI K√âRd√©s</button>
        </div>
        <div class="stats-display" id="quiz-stats">
            <p><span class="label">Halad√°s, te csicska:</span> <span id="progress-info">0/0</span></p>
            <p><span class="label">Elcseszett id≈ë:</span> <span id="quiz-timer-display">00:00</span></p>
            <p><span class="label">El√©rt Szotyi (Pont):</span> <span id="quiz-score-display">0</span></p>
            <p class="medal" id="quiz-medal-display">üèÖ?</p>
            <button id="reset-quiz-btn" onclick="resetQuiz()" style="display:none; margin-top:10px;">√öjra az Eg√©szet, L√∫zer!</button>
        </div>
    </div>

    <div class="game-section" id="timeline-section-container">
        <h2>Id≈ërendi K√°osz Mester</h2>
        <p style="text-align: center; font-size: 0.95em; color: #bbb; margin-bottom: 15px;">Mi volt el≈ëbb, te kis zseni? Kapd √∂ssze magad, mert az id≈ë ketyeg!</p>
        <div id="event-pair-display">
            <p style="text-align:center; font-weight:bold; font-size:1.3em; color: #E74C3C;">Na, melyik volt hamarabb, he?</p>
            <div class="event-options">
                <button id="eventA-btn" onclick="checkTimelineOrder(0)">Esem√©ny A</button>
                <button id="eventB-btn" onclick="checkTimelineOrder(1)">Esem√©ny B</button>
            </div>
        </div>
        <div id="timeline-feedback">...v√°rom a tipped, bajnok...</div>
        <div class="button-container" style="justify-content: center;">
            <button id="next-pair-btn" onclick="loadNewEventPair()">J√∂het a K√∂vi Adag!</button>
        </div>
        <div class="stats-display" id="timeline-stats">
            <p><span class="label">Pr√≥b√°lkoz√°sok sz√°ma, te kitart√≥:</span> <span id="timeline-attempts-display">0</span></p>
            <p><span class="label">Eltal√°ltad, te m√°zlista:</span> <span id="timeline-correct-display">0</span> (<span id="timeline-accuracy-display">0</span>%)</p>
            <p><span class="label">√Åtlagos t√∂k√∂l√©si id≈ë:</span> <span id="timeline-avg-time-display">N/A</span> mp</p>
            <p class="medal" id="timeline-medal-display">‚è≥?</p>
            <button id="reset-timeline-btn" onclick="resetTimelineGame()" style="margin-top:10px;">Null√°z√°s, Kezdj√ºk El√∂lr≈ël!</button>
        </div>
    </div>

    <script>
        // --- √Åltal√°nos seg√©df√ºggv√©nyek ---
        function shuffleArray(array) { /* ... (marad) ... */ }
        function formatTime(seconds) { /* ... (marad) ... */ }

        // --- R√©szletes Kv√≠z Logika ---
        const allQuizQuestions = [
            // I. Teleki P√°l minisztereln√∂ks√©ge
            { 
                section: "I. Teleki P√°l minisztereln√∂ks√©ge", 
                question: "Mikor kezd≈ëd√∂tt √©s meddig tartott Teleki P√°l els≈ë minisztereln√∂ks√©ge, te kis okos?", 
                answer: {
                    short: "1920. j√∫lius ‚Äì 1921. √°prilis.",
                    explanation: "Teleki P√°l els≈ë minisztereln√∂ki ciklusa 1920 j√∫lius√°t√≥l 1921 √°prilis√°ig tartott. El√©g sz*r id≈ëszak volt az orsz√°gnak, na.",
                    simple: "Teleki akkor volt f≈ën√∂k, amikor √©pp minden romokban hevert a h√°bor√∫ ut√°n. Kb. egy √©vig b√≠rta."
                }
            },
            { 
                section: "I. Teleki P√°l minisztereln√∂ks√©ge", 
                question: "Ki volt az a m√°jer f√∂ldm≈±vel√©si miniszter Teleki alatt, aki a f√∂ldreformmal sz√∂sz√∂lt?", 
                answer: {
                    short: "Nagyat√°di Szab√≥ Istv√°n.",
                    explanation: "Nagyat√°di Szab√≥ Istv√°n volt a f√∂ldm≈±vel√©si miniszter, ≈ë agyalta ki a Teleki-korm√°ny f√∂ldreformj√°t. Nagy mel√≥ volt, kev√©s eredm√©nnyel.",
                    simple: "Nagyat√°di Szab√≥ volt a cs√≥ka, aki megpr√≥b√°lt f√∂ldet adni a parasztoknak. Pr√≥b√°lkoz√°snak j√≥ volt."
                }
            },
            { 
                section: "I. Teleki P√°l minisztereln√∂ks√©ge", 
                question: "Teleki f√∂ldreformja: h√°ny paraszt kapott f√∂ldet, mennyit, √©s mi maradt a r√©gi sz*r a birtokrendszerben?", 
                answer: {
                    short: "~300.000 paraszt kapott 5-10 holdacsk√°t, de a nagybirtokosok v√≠gan r√∂h√∂gtek a markukba.",
                    explanation: "Kb. 300 ezer paraszt kapott egy kis ty√∫ksz*rnyi, 5-10 holdas f√∂ldet. De a l√©nyeg: sokan √≠gy is f√∂ld n√©lk√ºl maradtak, a nagybirtok rendszer megmaradt, mint a rossz beidegz≈ëd√©s.",
                    simple: "Osztottak egy kis f√∂ldet, de csak apr√≥ darabokat, √©s a nagy kuty√°k√© maradt a java. Tipikus."
                }
            },
            // ... (T√∂bbi k√©rd√©st is hasonl√≥ st√≠lusban √°t kell √≠rni a short, explanation √©s √öJ simple r√©szekkel!)
            // P√©lda a folytat√°sra:
            { 
                section: "I. Teleki P√°l minisztereln√∂ks√©ge", 
                question: "Milyen kem√©nyked√©st vetett be Teleki a komcsik √©s m√°s sz√©ls≈ës√©ges arcok ellen?", 
                answer: {
                    short: "Betilt√°s, sittre v√°g√°s, s≈ët, kiv√©gz√©s. Nem cic√≥ztak.",
                    explanation: "A Teleki-korm√°ny nem finomkodott: betiltott√°k a p√°rtjaikat, b√∂rt√∂nbe dugt√°k ≈ëket, √©s volt, akit ki is v√©geztek. Kem√©ny vil√°g volt.",
                    simple: "Teleki√©k nem szerett√©k a balh√©t, √∫gyhogy aki nagyon ugr√°lt (f≈ëleg a komcsik), azt cs√∫ny√°n elint√©zt√©k."
                }
            },
            { 
                section: "I. Teleki P√°l minisztereln√∂ks√©ge", 
                question: "Mi a fene volt az a ‚Äûnumerus clausus‚Äù az egyetemeken? Kinek volt ez sz√≠v√°s?", 
                answer: {
                    short: "Megszabt√°k, hogy melyik 'n√©pfajb√≥l' h√°nyan mehetnek egyetemre, az orsz√°gos ar√°nyuk szerint. F≈ëleg a zsid√≥knak volt ez g√°z.",
                    explanation: "A numerus clausus ('z√°rt sz√°m') azt jelentette, hogy az egyetemekre felvehet≈ë hallgat√≥k sz√°m√°t ‚Äûn√©pfajok‚Äù (f≈ëleg a zsid√≥kra √©rtve) √©s nemzetis√©gek szerint korl√°tozt√°k, az orsz√°gos ar√°nyukhoz igaz√≠tva. El√©g para.",
                    simple: "A zsid√≥kat √©s m√°s kisebbs√©geket kicsit kiszor√≠tott√°k az egyetemekr≈ël, hogy t√∂bb 'magyar' f√©rjen be. Nem volt t√∫l korrekt."
                }
            },
            // ... √©s √≠gy tov√°bb az √∂sszes k√©rd√©sre!

            // √öJ simple explanation mez≈ët hozz√° kell adni MINDEN allQuizQuestions elemhez.
            // Az al√°bbiak csak p√©ld√°k, az √ñSSZES k√©rd√©st √°t kell dolgozni.
            { 
                section: "IV. Bethlen k√ºlpolitik√°ja", 
                question: "Melyik orsz√°ggal cimbor√°lt Bethlen, √©s k√∂t√∂tt vele '√∂r√∂kbar√°ts√°gi' szerz≈ëd√©st 1927-ben, hogy ne legy√ºnk m√°r annyira egyed√ºl?", 
                answer: {
                    short: "Olaszorsz√°ggal. Mussolini√©kkal spanoltak.",
                    explanation: "1927-ben Magyarorsz√°g Olaszorsz√°ggal k√∂t√∂tt √∂r√∂kbar√°ts√°gi szerz≈ëd√©st. Ez nagy cucc volt, mert Bethlen ezzel pr√≥b√°lt kit√∂rni a k√ºlpolitikai karant√©nb√≥l.",
                    simple: "Bethlen haverkodott az olaszokkal, mert mindenki m√°s ut√°lt minket Trianon miatt. Kellett egy span."
                }
            }
        ];
        // FIGYELEM: A fenti allQuizQuestions t√∂mb√∂t ki kell eg√©sz√≠teni az √ñSSZES k√©rd√©seddel,
        // √©s mindegyikhez meg kell √≠rni a short, explanation, √âS simple magyar√°zatokat!
        // Ez most csak egy r√∂vid√≠tett p√©lda.

        let shuffledQuizQuestions = [];
        let currentQuizQuestionIndex = -1;
        let quizStartTime = 0;
        let quizTimerInterval = null;
        let quizScore = 0;
        let quizActive = false;

        const quizSectionTitleDisplay = document.getElementById('quiz-section-title-display');
        const quizQuestionDisplay = document.getElementById('question-display');
        const quizAnswerDisplayContainer = document.getElementById('answer-display-container');
        const quizAnswerDisplay = document.getElementById('answer-display');
        const quizExplanationDisplay = document.getElementById('explanation-display');
        const simpleExplanationDisplay = document.getElementById('simple-explanation-display'); // √öJ
        const quizProgressInfo = document.getElementById('progress-info');
        const quizShowAnswerBtn = document.getElementById('show-answer-btn');
        const quizNextQuestionBtn = document.getElementById('next-question-btn');
        const quizTimerDisplay = document.getElementById('quiz-timer-display');
        const quizScoreDisplay = document.getElementById('quiz-score-display');
        const quizMedalDisplay = document.getElementById('quiz-medal-display');
        const resetQuizBtn = document.getElementById('reset-quiz-btn');


        function startQuizTimer() { /* ... (marad) ... */ }
        function stopQuizTimer() { /* ... (marad) ... */ }

        function calculateQuizMedal(elapsedSeconds) {
            const totalQuestions = shuffledQuizQuestions.length;
            quizScore = currentQuizQuestionIndex + 1; 
            quizScoreDisplay.textContent = quizScore;

            let medal = "";
            const timePerQuestion = totalQuestions > 0 ? elapsedSeconds / totalQuestions : Infinity;

            if (timePerQuestion <= 20) medal = "ü•á Arany Agy (Vill√°m V√°god!)"; 
            else if (timePerQuestion <= 40) medal = "ü•à Ez√ºst Pacsirta (Nem vagy gyenge!)"; 
            else medal = "ü•â Bronz Csiga (Legal√°bb v√©gignyomtad!)"; 
            
            quizMedalDisplay.textContent = medal;
        }
        
        function resetQuiz() {
            stopQuizTimer();
            quizActive = false;
            currentQuizQuestionIndex = -1;
            quizScore = 0;
            quizTimerDisplay.textContent = "00:00";
            quizScoreDisplay.textContent = "0";
            quizMedalDisplay.textContent = "üèÖ?";
            quizProgressInfo.textContent = "0/0";
            quizQuestionDisplay.textContent = "Nyomj a \"START / K√ñVI K√âRd√©s\" gombra, ha mersz!";
            quizSectionTitleDisplay.textContent = "T√©mafelvezet≈ë cucc";
            quizAnswerDisplayContainer.style.display = "none";
            quizShowAnswerBtn.disabled = true;
            quizNextQuestionBtn.textContent = "START / K√ñVI K√âRd√©s";
            quizNextQuestionBtn.disabled = false;
            resetQuizBtn.style.display = "none";
            loadQuiz();
        }

        function loadQuiz() {
            shuffledQuizQuestions = [...allQuizQuestions];
            shuffleArray(shuffledQuizQuestions);
            quizProgressInfo.textContent = `0/${shuffledQuizQuestions.length}`;
             // Gy≈ëz≈ëdj meg r√≥la, hogy a t√∂mb nem √ºres, miel≈ëtt indexelni pr√≥b√°lsz
            if (shuffledQuizQuestions.length > 0) {
                 // Itt nem kell semmit megjelen√≠teni, csak a progress inf√≥t friss√≠teni
            } else {
                quizQuestionDisplay.textContent = "Hopp√°, nincsenek k√©rd√©sek! Valami g√°z van a m√°trixban.";
            }
        }

        function displayCurrentQuizQuestion() {
            if (currentQuizQuestionIndex < shuffledQuizQuestions.length) {
                const q = shuffledQuizQuestions[currentQuizQuestionIndex];
                quizSectionTitleDisplay.textContent = q.section;
                quizQuestionDisplay.textContent = q.question;
                quizAnswerDisplay.textContent = q.answer.short;
                quizExplanationDisplay.textContent = q.answer.explanation;
                simpleExplanationDisplay.textContent = q.answer.simple; // √öJ
                quizAnswerDisplayContainer.style.display = 'none';
                quizShowAnswerBtn.disabled = false;
                quizNextQuestionBtn.disabled = false;
                quizProgressInfo.textContent = `${currentQuizQuestionIndex + 1}/${shuffledQuizQuestions.length}`;
                quizNextQuestionBtn.textContent = "K√ñVI K√âRd√©s";
            }
        }
        
        function nextQuizQuestion() {
            if (!quizActive) {
                if (shuffledQuizQuestions.length === 0) { // Ellen≈ërz√©s, hogy vannak-e k√©rd√©sek
                    quizQuestionDisplay.textContent = "Nincsenek k√©rd√©sek, te kis huncut! T√∂ltsd fel ≈ëket!";
                    return;
                }
                quizActive = true;
                startQuizTimer();
                resetQuizBtn.style.display = "block";
                 quizNextQuestionBtn.textContent = "K√ñVI K√âRd√©s"; // Gomb felirat√°nak friss√≠t√©se start ut√°n
            }

            currentQuizQuestionIndex++;
            if (currentQuizQuestionIndex < shuffledQuizQuestions.length) {
                displayCurrentQuizQuestion();
            } else {
                stopQuizTimer();
                const elapsedTime = quizStartTime > 0 ? Math.floor((Date.now() - quizStartTime) / 1000) : 0;
                quizQuestionDisplay.textContent = "V√©ge a gy√∂trelemnek! Megcsin√°ltad a Nagy Agy√©get≈ë Kv√≠zt!";
                quizSectionTitleDisplay.textContent = "Kv√≠z K√âSZ, BAZMEG!";
                quizAnswerDisplayContainer.style.display = 'none';
                quizShowAnswerBtn.disabled = true;
                quizNextQuestionBtn.disabled = true;
                quizNextQuestionBtn.textContent = "ENNYI VOLT";
                calculateQuizMedal(elapsedTime);
            }
        }


        function showQuizAnswer() {
            if (currentQuizQuestionIndex >= 0 && currentQuizQuestionIndex < shuffledQuizQuestions.length) {
                quizAnswerDisplayContainer.style.display = 'block';
            }
        }
        
        // --- Id≈ërend Gyakorl√≥ J√°t√©k Logika ---
        const timelineEvents = [ /* ... (marad az el≈ëz≈ë k√≥db√≥l) ... */ ];
        // FONTOS: A timelineEvents t√∂mb√∂t is m√°sold be az el≈ëz≈ë verzi√≥b√≥l!

        let currentEventPair = [];
        let timelineAttempts = 0;
        let timelineCorrectAnswers = 0;
        let totalTimelineResponseTime = 0;
        let currentPairStartTime = 0;

        const eventABtn = document.getElementById('eventA-btn');
        const eventBBtn = document.getElementById('eventB-btn');
        const timelineFeedback = document.getElementById('timeline-feedback');
        const nextPairBtn = document.getElementById('next-pair-btn');
        const timelineAttemptsDisplay = document.getElementById('timeline-attempts-display');
        const timelineCorrectDisplay = document.getElementById('timeline-correct-display');
        const timelineAccuracyDisplay = document.getElementById('timeline-accuracy-display');
        const timelineAvgTimeDisplay = document.getElementById('timeline-avg-time-display');
        const timelineMedalDisplay = document.getElementById('timeline-medal-display');

        function updateTimelineStats() {
            timelineAttemptsDisplay.textContent = timelineAttempts;
            timelineCorrectDisplay.textContent = timelineCorrectAnswers;
            const accuracy = timelineAttempts > 0 ? ((timelineCorrectAnswers / timelineAttempts) * 100).toFixed(0) : 0;
            timelineAccuracyDisplay.textContent = accuracy;
            const avgTime = timelineAttempts > 0 ? (totalTimelineResponseTime / timelineAttempts / 1000).toFixed(1) : "N/A";
            timelineAvgTimeDisplay.textContent = avgTime;

            let medal = "‚è≥?";
            if (timelineAttempts >= 5) { 
                const accuracyRate = parseFloat(accuracy);
                const avgResponseSec = parseFloat(avgTime);

                if (accuracyRate >= 90 && avgResponseSec <= 8) medal = "ü•á Id≈ë Lord (Istencs√°sz√°r vagy!)";
                else if (accuracyRate >= 75 && avgResponseSec <= 12) medal = "ü•à Krono-M√°gus (Nem semmi!)";
                else if (accuracyRate >= 50) medal = "ü•â Id≈ë Botos (Van m√©g hova fejl≈ëdni, de k√ºzdesz!)";
                else medal = "üêå Lass√∫ V√≠z Partot Mos? (Na, ezt az√©rt nem...)";
            }
            timelineMedalDisplay.textContent = medal;
        }
        
        function resetTimelineGame() {
            timelineAttempts = 0;
            timelineCorrectAnswers = 0;
            totalTimelineResponseTime = 0;
            updateTimelineStats();
            timelineMedalDisplay.textContent = "‚è≥?";
            loadNewEventPair();
        }

        function loadNewEventPair() {
             if (timelineEvents.length < 2) {
                timelineFeedback.textContent = "Nincs el√©g esem√©ny a j√°t√©khoz, te kis m√≥kamester!";
                eventABtn.style.display = "none";
                eventBBtn.style.display = "none";
                nextPairBtn.disabled = true;
                return;
            }
            eventABtn.style.display = "block";
            eventBBtn.style.display = "block";

            let indexA = Math.floor(Math.random() * timelineEvents.length);
            let indexB = Math.floor(Math.random() * timelineEvents.length);
            while (indexB === indexA) {
                indexB = Math.floor(Math.random() * timelineEvents.length);
            }
            currentEventPair = Math.random() < 0.5 ? [timelineEvents[indexA], timelineEvents[indexB]] : [timelineEvents[indexB], timelineEvents[indexA]];
            
            eventABtn.textContent = currentEventPair[0].text;
            eventBBtn.textContent = currentEventPair[1].text;

            eventABtn.classList.remove('correct', 'incorrect');
            eventBBtn.classList.remove('correct', 'incorrect');
            eventABtn.disabled = false;
            eventBBtn.disabled = false;
            timelineFeedback.textContent = "...v√°rom a tipped, bajnok...";
            nextPairBtn.disabled = true; 
            currentPairStartTime = Date.now();
        }

        function checkTimelineOrder(selectedIndex) { /* ... (marad az el≈ëz≈ë k√≥db√≥l, de a sz√∂vegek friss√ºlhetnek) ... */ 
            const responseTime = Date.now() - currentPairStartTime;
            totalTimelineResponseTime += responseTime;
            timelineAttempts++;

            const chosenEvent = currentEventPair[selectedIndex];
            const otherEvent = currentEventPair[1 - selectedIndex];
            const actualEarlierEvent = timelineEvents.find(e => e.sortKey === Math.min(currentEventPair[0].sortKey, currentEventPair[1].sortKey));

            eventABtn.disabled = true;
            eventBBtn.disabled = true;
            nextPairBtn.disabled = false;

            if (chosenEvent.sortKey === actualEarlierEvent.sortKey) {
                timelineFeedback.textContent = `Kir√°ly vagy! Bej√∂tt! (${(responseTime/1000).toFixed(1)} mp)`;
                timelineFeedback.style.color = "#2ECC71"; 
                if (selectedIndex === 0) eventABtn.classList.add('correct');
                else eventBBtn.classList.add('correct');
                timelineCorrectAnswers++;
            } else {
                timelineFeedback.textContent = `Francokat! A helyes: ${actualEarlierEvent.text} (${(responseTime/1000).toFixed(1)} mp)`;
                timelineFeedback.style.color = "#E74C3C";
                if (selectedIndex === 0) eventABtn.classList.add('incorrect');
                else eventBBtn.classList.add('incorrect');
                if(currentEventPair[0].sortKey === actualEarlierEvent.sortKey) eventABtn.classList.add('correct');
                else eventBBtn.classList.add('correct');
            }
            updateTimelineStats();
        }
        
        window.onload = () => {
            loadQuiz();
            loadNewEventPair();
            updateTimelineStats();
        };
    </script>
</body>
</html>
